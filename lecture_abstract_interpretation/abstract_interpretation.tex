\errorcontextlines=9999
\documentclass[
   aspectratio=169, % default is 43
   10pt, % font size, default is 11pt
   % nosectionframes,
   uniqueslidenumber,
   sectiontitleslides,
   % handout,
   professionalfonts
]{beamer}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[sfdefault]{FiraSans}

\usepackage{stmaryrd}
\usepackage{ccicons}
\usepackage{cancel}
\usepackage[vvarbb]{notomath}
\usepackage{FiraMono}
\usepackage{tikz,forest}
\usepackage{fontawesome}
\usepackage{csquotes}
\usepackage{../simplebnf}
\usepackage{../abstract-interpretation-ltx/absint}
\makeatletter
\def\absint@reflab#1#2{#2}% we do not need labels here
\usetikzlibrary{arrows.meta,decorations.pathmorphing,fit,decorations.pathreplacing,backgrounds,matrix,shadows}
\pgfdeclarelayer{foreground}
\usepackage{tikzpingus}
\pgfsetlayers{very-background,background,main,middle,foreground}
\def\sbseries{\fontseries{sb}\selectfont}
\def\textsb#1{{\sbseries#1}}

\usepackage{../slide-template-uulm/fancybeamer} % use the fancy beamer package
\usepackage{../slide-template-uulm/fancyuulm}
\setpaths{{../slide-template-uulm/}{../slide-template-uulm/logos/}{../slide-template-uulm/empty-slides/}{../xlistings/}}

\usepackage{../code-animation/code-animation}
\usepackage[fakeminted,print]{../xlistings/xlistings}
\usepackage{multirow}
\xlstsetmintedstyle{plain}
\LoadLanguages{R,Java}
\lstcolorlet{keywordA}{black!70!red}%
\lstcolorlet{keywordB}{black!70!red}%
\lstcolorlet{keywordC}{black!70!red}%
\lstcolorlet{numbers}{black!70!yellow}%
\def\absintstyle#1{#1}
\xlstmintedwithlangbadge

% bib
\usepackage[style=alphabetic,backend=biber]{biblatex}
\addbibresource{./references.bib}
\DeclareCiteCommand{\fullcite}
  {\usebibmacro{prenote}}
  {%
      \usebibmacro{author}%
      \setunit{\labelnamepunct}\newblock
      \printfield[titlecase]{title}
      \space
      \newblock(\printlist{publisher}%
      \setunit{\addcomma\space}%
      \printfield{year})%
  }
  {\multicitedelim}
  {\usebibmacro{postnote}}

\def\CurrentSectionComment{}

\AtBeginSection{
    \begin{frame}
        \usebeamerfont{section title}\textbf{\thesection.~\insertsection}\\[1.75pt]
        \color{gray}\mdseries\ifx\CurrentSectionComment\empty\else\small\CurrentSectionComment\fi
    \end{frame}
}

\usepackage{relsize}
\def\supercite#1{\raisebox{-1pt}{\textsuperscript{\smaller\color{gray}\cite{#1}}}}

\newsavebox\SimpleSignLattice
\begin{lrbox}{\SimpleSignLattice}
\scriptsize
\begin{tikzpicture}[line cap=round,x=6.5mm,y=6.5mm]
   \node (top) at (0,0) {\absexpr{\top}};
   \node (pos) at (-1,-1) {\absexpr{\geq 0}};
   \node (neg) at (1,-1) {\absexpr{\leq 0}};
   \node (zero) at (0,-2) {\absexpr{0}};
   \node (bot) at (0,-3) {\absexpr{\bot}};
   \draw (top) -- (pos) -- (zero) -- (neg) -- (top) (zero) -- (bot);
\end{tikzpicture}
\end{lrbox}

\def\LeftArrow{\text{\BeginAccSupp{method=escape,ActualText={<-}}\(\leftarrow\)\EndAccSupp{}}}
\def\RightArrow{\text{\BeginAccSupp{method=escape,ActualText={->}}\(\rightarrow\)\EndAccSupp{}}}
\def\DoubleLeftArrow{\text{\BeginAccSupp{method=escape,ActualText={<<-}}\(\twoheadleftarrow\)\EndAccSupp{}}}
\def\DoubleRightArrow{\text{\BeginAccSupp{method=escape,ActualText={->>}}\(\twoheadrightarrow\)\EndAccSupp{}}}
\lstset{add to literate={<-}{{{\!\LeftArrow\!}}}2
   {<<-}{{{\!\DoubleLeftArrow\!}}}2
   {->}{{{\!\RightArrow\!}}}2
   {->>}{{{\!\DoubleRightArrow\!}}}2
}
\makeatletter
\def\ca@Strut{%
    \vphantom{%
        \xlst@font@fs@normal\xlst@styles@lst@basic\strut
    }%
}

\def\AbstractInfo#1{\ensuremath{\mathcolor{gray}{\Lbag}\,#1\,\mathcolor{gray}{\Rbag}}}
\def\Set#1{\ensuremath{\{#1\kern1pt\}}}
\def\IntCC#1#2{\ensuremath{[#1\,..\,#2]}}
\def\IntOC#1#2{\ensuremath{(#1\,..\,#2]}}
\def\IntCO#1#2{\ensuremath{[#1\,..\,#2)}}
\def\IntOO#1#2{\ensuremath{(#1\,..\,#2)}}
\def\S#1{\savebox\TestBox{\footnotesize\absexpr{\Set{#1}}}\ifdim\ht\TestBox>5mm\makebox[5mm][c]{\usebox\TestBox}\else\usebox\TestBox\fi}%
\def\I#1#2{\footnotesize\absexpr{\IntCC{#1}{#2}}}

\tikzset{
    path image shift/.style={}, % scale patch just for white padding
    path image/.style={path picture={\node[scale=.98] at ([path image shift]path picture bounding box.center) {#1};}}
}

\title[Abstract Interpretation]{Abstract Interpretation}
\subtitle[SQA]{Software Quality Assurance --- Static Code Analysis, II}
\author[F. Sihler]{Florian Sihler}
\date{December 10, 2025}

\fancylogos{sp,uulm} % define logos that are spread evenly across the bottom of the title slide

\usepackage{../beamer-latex-pdfpc-notes}
\input{../flowrview.tex}

\begin{document}

\maketitle[titleimage/title][40]

\mode
<handout>

\begin{frame}{Outline}
% \begin{multicols}{2}
\tableofcontents[hideallsubsections]
% \end{multicols}
\end{frame}

\mode
<all>

\def\CurrentSectionComment{Why am I even here?}
\section{The Why}
\tikzset{
   RectRounding/.style={rounded corners=3pt},
   RawRect/.style={
      draw=black,
      rectangle,
      RectRounding,
      minimum size=1.8em,
      inner sep=5pt,
      fill=white,
   },
   Rect/.style={
      draw=black,
      rectangle,
      RectRounding,
      outer sep=2pt,
      minimum size=1.8em,
      fill=white,
      drop shadow={fill=lightgray!50}
   },
   Soft/.style={line join=round,line cap=round},
   Link/.style={
      draw,
      Soft,
      rounded corners=2.5pt,
      -Kite
   },
   na/.style={midway,above,font=\scriptsize,align=center},
   base@l/.style 2 args={edge node={node[na,#2]{#1}}},
   l/.style={base@l={#1}{}},
   lr/.style={base@l={#1}{right,align=left}},
   ll/.style={base@l={#1}{left,align=right}},
   lb/.style={base@l={#1}{below}},
}


\tikzfading[name=rectangular fade,
  inner color=transparent!0,
  middle color=transparent!0,
  outer color=transparent!100]

\newsavebox\CurrImgBox
\tikzset{ImageScales/.style={xscale=1.2,yscale=1},ImageStyle/.style={draw,thin,white}}
\def\ImageWithRoundedCorners#1#2{%
   \savebox\CurrImgBox{\includegraphics[width=#1]{#2}}%
   \tikz{%
      \foreach \i/\o in {1/1,2/.5} {%
         \path[
            path image shift={(0pt,0pt)},
            path image={\includegraphics[width=#1]{#2}},
            rounded corners=8pt,
            path fading=rectangular fade,
            fading transform={ImageScales},
            ImageStyle,
            opacity=\o
         ] (0,0) rectangle (\wd\CurrImgBox,\ht\CurrImgBox);%
      }
   }%
}
\setlength{\XeTeXLinkMargin}{0pt}
\tikzset{
   % https://tex.stackexchange.com/a/451914
   href node/.style={
        alias=sourcenode,
        append after command={
            let \p1= (sourcenode.north west),
                \p2= (sourcenode.south east),
                \n1={\x2-\x1},
                \n2={\y1-\y2} in
            node [inner sep=-0.5\pgflinewidth,outer sep=0pt,anchor=center, at=(sourcenode.center)] {\href{#1}{\XeTeXLinkBox{\phantom{\rule{\n1}{\n2}}}}}
        }
    }
}


\newsavebox\Landscape
\begin{frame}{Embedding a Landscape}
\begin{lrbox}{\Landscape}   
\begin{tikzpicture}[
   Rect/.append style={minimum height=3.25em,text width=6.5em,align=center}
]
   \node[Rect] (req) at (0,0) {Requirements};
   \node[Rect,right=1.5cm] (var) at (req.east) {Variability\\Req.};
   \node[Rect,right=1.5cm] (form) at (var.east) {Formal\\Req.};
   \node[Rect,below=6mm] (source) at(var.south) {Source\\Code};
   \path (req) -- (var) coordinate[pos=.5] (r2v);
   \path (var) -- (form) coordinate[pos=.5] (v2f);
   \node[Rect,below=6mm] (gui) at([xshift=-3.5mm]source.south-|r2v) {GUI Test\\Cases};
   \node[Rect,below=6mm] (test) at([xshift=3.5mm]source.south-|v2f) {Test\\Cases};
   \draw[Link] (req) to[l={Modeling}] (var);
   \draw[Link] (req.north) -- ++(0,3.5mm) to[l={Modeling/Formalization (Statecharts,~\ldots)}] ([yshift=3.5mm]form.north) -- (form.north);
   \draw[Link] ([yshift=-2mm]form.north east) -- ++(3mm,0) to[lr={Model\\Checking}] ([yshift=2mm,xshift=3mm]form.south east) -- ([yshift=2mm]form.south east);
   \draw[Link] (form.south) |- (test) node[na,pos=.25,right,align=left] {Model-Based Test\\Case Generation};
   \draw[Link] (var) -| (test) node[na,pos=.75,right,align=left] {Feature\\Interaction\\Testing};
   \draw[Link] (test.160) -| ([xshift=-8.5mm]source.south east) node[na,pos=.25,below] {Tests};
   \draw[Link] (gui.20) -| ([xshift=8.5mm]source.south west) node[na,pos=.25,below] {Tests};
   \draw[Link] (gui) -| (req.south) node[na,pos=.75,left,align=right] {Automated\\User-Interface\\Testing};
   \draw[Link,Kite-] ([yshift=-2mm]req.north west) -- ++(-3mm,0) to[ll={Dep.\\Req.}] ([yshift=2mm,xshift=-3mm]req.south west) -- ([yshift=2mm]req.south west);
   \draw[Link] (req.300) |- (source) node[na,pos=.75,below] {Implementation};
   \draw[Link] ([xshift=-2mm]test.south east) -- ++(0,-3mm) to[lb={Mutation, Property-Based,\\Prioritization}] ([xshift=2mm,yshift=-3mm]test.south west) -- ([xshift=2mm]test.south west);
   \tikzset{@/.style={}}
   \only<3->{
      \tikzset{@/.style={red,thick,font=\bfseries}}
   }
   \draw[Link,Kite-,@] ([xshift=-8.5mm]source.north east) -- ++(0,3.5mm) 
      -- ([xshift=8.5mm,yshift=3.5mm]source.north west) 
         node[na,yshift=-1.85mm,pos=1,left,align=right] (s) {~~~\strut Static}
         node[na,yshift=-1.85mm,pos=0,right,align=left] (a) {\,\strut Analysis}
      -- ([xshift=8.5mm]source.north west);
   \only<3->{
      \pgfonlayer{background}
      \node[fit={(s)(a)(source)},inner sep=1.5pt,draw,red,very thick,rounded corners=2pt,inner ysep=2.5pt,yshift=-1pt,fill=red!5] {};
      \endpgfonlayer
   }
\end{tikzpicture}
\end{lrbox}
\begin{tikzpicture}[overlay,remember picture]
   \onslide<2->{\node[yshift=-5mm] at(current page.center) {\usebox\Landscape};}
\end{tikzpicture}
\end{frame}


\subsection[Motivation]{Initial Motivation}

\newsavebox\PinguBox
\savebox\PinguBox{\tikz{\pingu[right wing shock, left eye wink, body type=legacy,left wing wave,name=pingu,heart]; \node[above] at (pingu-wing-left-tip) {\huge\faQuestion};}}
\newsavebox\PinguBoxB
\savebox\PinguBoxB{\tikz{\pingu[eyes wink, body type=legacy,wings wave,name=pingu,heart];}}
\begin{frame}[b]{}
\begin{tikzpicture}[overlay,remember picture]
   \onslide<2->{\node[right=4mm,yshift=2cm] (@) at (current page.west) {\scalebox{.65}{\usebox\PinguBox}};}
   \onslide<2->{
      \node[below right,yshift=-2.5mm,xshift=2mm] (@) at (@.north east) {\textbf{\large What} is static analysis?};
   }
   \onslide<3->{
      \node[below=2.75mm,align=center,font=\large] at(current page.center|-@.south) {Discover \textit{\subnode{desc@syntactic-properties}{syntactic}/\subnode{desc@semantic-properties}{semantic} properties} of programs\\\subnode{desc@no-execute}{\textsb{without}} running them.\rlap{\supercite{rival2020introduction}}};
   }
\end{tikzpicture}

\onslide<4->{Today, we learn how to\ldots\small\vspace*{-2mm}}
\begin{itemize}
   \itemsep3.5pt
   \item<5-> describe semantic properties
   \item<6-> compare, refine, and combine properties
   \item<7-> describe and map language semantics to properties
   \item<8-> deal with the cost of abstraction~\textcolor{lightgray}{\footnotesize(and the fun)}
\end{itemize}\vspace*{.35em}
\begin{tikzpicture}[overlay,remember picture]
   \onslide<8->{\node[above left=.5mm,yshift=3.25mm] at(current page.south east) {\scalebox{.65}{\usebox\PinguBoxB}};}
\end{tikzpicture}
\end{frame}

\begin{frame}[fragile]{\insertsection}
\AnimateCode{onslide={o2:{3,...,7},-,-,-,-,-,-,-},handout=2/1,first slide=2}
\begin{minted}[escapeinside=||,lineskip=1pt]{java}
public static void main(String[] args) {
    int a = 1; |\tikzmarknode{@a1}{\strut}|
    double r = Math.random() * 10; |\tikzmarknode{@r1}{\strut}|
    if (r > 5) { |\tikzmarknode{@r2}{\strut}|
       a = 2; |\tikzmarknode{@a2}{\strut}|
    }
    System.out.println(1 / a); |\tikzmarknode{@a3}{\strut}|
}
\end{minted}
\endAnimateCode
\begin{tikzpicture}[overlay,remember picture]
   \onslide<3->{%
      \coordinate[yshift=2pt] (@a1) at (pic cs:@a1);
      \node[right=4.66cm] (@a1) at (@a1) {\AbstractInfo{a \in \Set{1}}};
   }%
   \onslide<4->{%
      \coordinate[yshift=2pt] (@r1) at (pic cs:@r1);
      \node[right] at (@r1-|@a1.west) {\AbstractInfo{r \in \IntCO{0}{10}}};
   }%
   \onslide<5->{%
      \coordinate[yshift=2pt] (@a2) at (pic cs:@a2);
      \node[right] at (@a2-|@a1.west) {\AbstractInfo{a \in \Set{2}}};
   }%
   \onslide<6->{%
      \coordinate[yshift=2pt] (@a3) at (pic cs:@a3);
      \node[right] (@set) at (@a3-|@a1.west) {\AbstractInfo{a \in \Set{1, 2}}};
      \onslide<7->{%
         \node[right] at (@set.east) {\(\to\)~\;Valid? Ok? Safe?};
      }
   }
\end{tikzpicture}
\begin{itemize}
   \item<8-> We want to proof, that a program satisfies certain properties
   \item<9-> Abstract Interpretation is one \textcolor{lightgray}{{\scriptsize(/the)}} technique to do so
\end{itemize}
\note[itemize]{
   \item Follow Example
   \item We can abstract more, even go down to the bit level, but we stay abstract for the example
   \item Note that if has no else, we have to combine
   \item we do not track provenance, pointers, side-effects etc., but we keep it simple for this example
}
\end{frame}

\subsection{Literature}

\newsavebox\CatCanRead
\savebox\CatCanRead{%
\tikzset{ImageScales/.style={},ImageStyle/.style={}}
\ImageWithRoundedCorners{38.5mm}{cat-can-read.jpg}%
}

\newsavebox\PatrickSignature
\savebox\PatrickSignature{%
\tikzset{ImageScales/.style={},ImageStyle/.style={}}
\ImageWithRoundedCorners{38.5mm}{patrick-cousot-sign.jpg}%
}

% https://www.youtube.com/watch?v=IBlfJerAcRw&t=2624s
\begin{frame}{Recommended Resources}
\strut\hfill\raisebox{\dimexpr-\height+1cm}{\begin{tikzpicture}
   \onslide<2->{%
      \draw[darkgray,thick,rounded corners=2pt,path image={\includegraphics[width=4cm]{itsa-cover.jpg}}] (0,0) rectangle ++(3.8,5);
      \node[above] at(current bounding box.north) {\clap{\small\strut Using Analyses~\cite{rival2020introduction}}};
   }
\end{tikzpicture}}\hfill\raisebox{\dimexpr-\height+1cm}{\begin{tikzpicture}
   \onslide<3->{%
      \draw[darkgray,thick,rounded corners=2pt,path image={\includegraphics[width=4cm]{poa-cover.jpg}}] (0,0) rectangle ++(3.9,5.5);
      \node[above] at(current bounding box.north) {\clap{\small\strut Formal Foundations~\cite{cousout2021principles}}};
   }
\end{tikzpicture}}\hfill\raisebox{\dimexpr-\height+1cm}{\begin{tikzpicture}
   \onslide<4->{%
      \draw[darkgray,thick,rounded corners=2pt,path image={\includegraphics[width=4cm]{dfa-cover.jpg}}] (0,0) rectangle ++(3.9,6);
      \node[above] at(current bounding box.north) {\clap{\small\strut Dataflow Perspective~\cite{10.5555/1592955}}};
   }
\end{tikzpicture}}\hfill\strut
\begin{tikzpicture}[overlay,remember picture]
   \node[above right=0.5mm,yshift=3mm,gray,font=\tiny] at (current page.south west) {And for an overview: \citetitle{DBLP:journals/ftpl/Mine17}~\cite{DBLP:journals/ftpl/Mine17}};
   \only<5-|handout:2>{
      \node[fill=white,circle,inner sep=-9pt,fill opacity=1,draw opacity=1,
      path fading=circle with fuzzy edge 20 percent,scale=1.125,xshift=-1.65cm%
      ] at(current page.center) {\usebox\PatrickSignature};
      \only<6-|handout:2>{\node[fill=white,circle,inner sep=-9pt,fill opacity=1,draw opacity=1,
      path fading=circle with fuzzy edge 20 percent,scale=1.5,xshift=1.65cm%
      ] at(current page.center) {\usebox\CatCanRead};
      }
   }
\end{tikzpicture}
\end{frame}

\def\CurrentSectionComment{Gimme properties, gimme abstractions!}
\section{The How}
\subsection{Terminology}

\newsavebox\PatrickCousot
\savebox\PatrickCousot{%
\ImageWithRoundedCorners{17.25mm}{patrick-cousot.jpg}%
}
\newsavebox\RadhiaCousot
\savebox\RadhiaCousot{%
\ImageWithRoundedCorners{17.25mm}{radhia-cousot.jpg}%
}

\newsavebox\GraphHeaven
\begin{frame}[c]{Abstract \textcolor{gray}{Interpretation}}
\frametitle<1>{Abstract \textcolor{gray}{Interpretation}}%
\frametitle<2-|handout:1>{Concrete \textcolor{gray}{Interpretation}}%
\frametitle<11-|handout:1>{Abstract \textcolor{gray}{Interpretation}}%
% häufige Visualisierung
\begin{lrbox}{\GraphHeaven}
\pgfmathsetseed{42}%
\begin{tikzpicture}[line cap=round]
   \pgfonlayer{foreground}
   \draw[Kite-Kite,very thick] (0,3.5) node[below right,yshift=1mm] {{\onslide<3->{\(x(t)\)}}} |- (8,0) node[above left] {{\onslide<2->{\(t\)}}}; % time vs. x at tat time
   \endpgfonlayer
   \colorlet{@}{red}
   \onslide<4->{\only<5->{\colorlet{@}{gray}}\draw[very thick,@] (0,1) plot [smooth] coordinates {(0,1) (1,2) (2,1) (3,2) (4,1) (5,2) (6,1) (7,2) (8,1)}; % x(t)
   }
   \colorlet{@}{red}
   \onslide<5->{\only<6->{\colorlet{@}{gray}}\draw[very thick,@] (0,0) plot [smooth] coordinates {(0,0) (1,1) (2,2) (3,2) (4,2.5) (5,2.5) (6,.5) (7,.6) (8,.6)}; % x(t)
   }
   \colorlet{@}{red}
   \onslide<6->{\only<7->{\colorlet{@}{gray}}\draw[very thick,@] (0,1.5) plot [smooth] coordinates {(0,1.5) (1,2) (2,2.5) (3,2) (4,2) (5,2.5) (6,2.5) (7,2) (8,2.5)}; % x(t)
   }
   \onslide<8->{
      \foreach \i in {0,...,5} {
         \pgfmathsetmacro{\randA}{rnd*0.33}
         \pgfmathsetmacro{\randB}{rand*0.5}
         \pgfmathsetmacro{\randC}{rand*0.4}
         \draw[gray] (0,1.5+\randA) plot [smooth] coordinates {(0,1.5+\randA) (1,2-\randB) (2,2.5-\randA) (3,2-\randB) (4,2+\randA) (5,2.5) (6,2.5+\randA) (7,2-\randA) (8,2.5+\randB)} node[inner sep=0pt] (a-\i) {};
         \draw[gray] (0,0+\randA) plot [smooth] coordinates {(0,0+\randA) (1,1-\randB) (2,2-\randB) (3,2+\randC) (4,2.5-\randA) (5,2.5-\randB) (6,.5+\randC) (7,.6+\randB) (8,.6+\randC)} node[inner sep=0pt] (b-\i) {};
         \draw[gray] (0,1+\randB) plot [smooth] coordinates {(0,1-\randC) (1,2-\randB) (2,1+\randB) (3,2-\randA) (4,1+\randA) (5,2-\randB) (6,1) (7,2-\randC) (8,1+\randA)} node[inner sep=0pt] (c-\i) {};
      }
   }
   % fit to all nodes to get the bounding box
   \node[fit=(a-0) (a-1) (a-2) (a-3) (a-4) (a-5) (b-0) (b-1) (b-2) (b-3) (b-4) (b-5) (c-0) (c-1) (c-2) (c-3) (c-4) (c-5),inner sep=0pt] (big-ghost) {~};
   \onslide<9->{
      \draw[decorate,thick,decoration={brace,amplitude=5pt,raise=2pt},gray] (big-ghost.north east) -- (big-ghost.south east) node[midway,right=7pt,gray,align=left] (@doc) {Collecting Semantics\textsuperscript{\cite[91]{cousout2021principles}}};
   }
   \onslide<10->{
      \node[below right,xshift=-2mm,yshift=5mm,font=\footnotesize,text width=6cm,opacity=.5] at (@doc.south west) {\begin{itemize}
         \itemsep-1pt
         \item Maybe impossible to compute statically
         \item \ldots~or very expensive (\faCaretRight~\textit{dynamic})
         \item[\faCaretRight] Abstract Interpretation to the rescue
      \end{itemize}};
   }
   \pgfonlayer{background}
   \pgfinterruptboundingbox
   \only<11|handout:0>{
   \fill[red,opacity=.175,even odd rule] plot [smooth] coordinates {(0,0) (1,0.4) (2,0.5) (3,1) (4,.8) (5,1) (6,.1) (7,0.2) (8.03,.2) (8.03,3) (7,2.8) (6,3) (5,2.95) (4,2.85) (3,2.75) (2,2.65) (1,2.5) (0,2) } -- cycle; 
   }
   \only<12->{
   \fill[red,opacity=.175,even odd rule] plot [smooth] coordinates {(0,0) (1,0.4) (2,0.5) (3,1) (4,.8) (5,1) (6,.1) (7,0.2) (8.03,.2) (8.03,3) (7,2.8) (6,3) (5,2.95) (4,2.85) (3,2.75) (2,2.65) (1,2.5) (0,2) } -- cycle (6,1.85) circle[radius=4mm]; 
   }
   \onslide<11->{%
      \draw[Circle-,red,rounded corners=4pt] (7.75,2.9) -- ++(.35,.5) -- ++(.5,0) node[right,align=left] {(Trace) Abstraction\textsuperscript{\cite[92]{cousout2021principles}}\\[-2pt]\footnotesize\color{gray}just one of many};
   }
   \endpgfinterruptboundingbox
   \onslide<13->{
      \node (@b1) at (6,1.85) {\small\faBug};
      \node (@b2) at (3,.35) {\small\faBug};
      \node (@b3) at (7,2.5) {\small\faBug};
   }
   \onslide<14->{
      \node[above left=-1mm,green] at(@b2.south east) {\scriptsize\faCheck};
   }
   \onslide<15->{
      \node[above left=-1mm,green] at(@b1.south east) {\scriptsize\faCheck};
   }
   \onslide<16->{
      \node[above left=-1mm,yshift=1pt,orange] at(@b3.south east) {\scriptsize\faQuestion};
   }
   \endpgfonlayer
   \path[use as bounding box] (0,0) rectangle (8,3.5);
\end{tikzpicture}
\end{lrbox}
\begin{tikzpicture}[overlay,remember picture]
   \node[xshift=2.5mm,yshift=-6.5mm] at(current page.center) {\usebox\GraphHeaven};
   \node[above right,gray,yshift=3.5mm,font=\tiny,text width=.9\paperwidth] at (current page.south west) {See \citetitle{cousout2012casual}~\cite{cousout2012casual}};
   \onslide<17->{
      \node[below left=4.65mm,yshift=3mm,align=right,font=\tiny,
         href node={https://web.archive.org/web/20250808020005/https://cs.nyu.edu/~pcousot/}
      ] (@bk) at(current page.north east) {%
         \usebox\PatrickCousot\\[1.65pt]
         \textsb{Patrick Cousot (1948)}\\%
         \color{gray}Personal Website
      };
      \node[above left,xshift=-.75mm,font=\tiny,align=right,
         href node={https://en.wikipedia.org/wiki/Radhia_Cousot\#/media/File:RadhiaCousot--Picture.jpg}
      ] (@dr) at(@bk.south west) {%
         \usebox\RadhiaCousot\\[1.65pt]
         \textsb{Radhia Cousot (1947--2014)}\\%
         \color{gray}Patrick Cousot
      };
   }
\end{tikzpicture}
\note[itemize]{
   \item Single lines are executions, e.g., tests
}
\end{frame}

\newsavebox\PowersetZHasse
\newsavebox\TestBox
% TOOD: measure and only box if larger?
\begin{lrbox}{\PowersetZHasse}
\def\S#1{\savebox\TestBox{\footnotesize\absexpr{\Set{#1}}}\ifdim\ht\TestBox>5mm\makebox[5mm][c]{\usebox\TestBox}\else\usebox\TestBox\fi}\color{gray}%
\begin{tikzpicture}
   \matrix (A) [matrix of nodes, row sep=1mm, column sep=-2mm]
   {
       & & & \kern-4mm\S{-4, 0, 1, 9}\kern-4mm & & & \\
       & & \S{-4,0,1} & \ldots & \S{0,1,9} & & \\
      & \S{-4,0} & \ldots & \S{0,1} & \ldots & \S{1,9} & \\
      \S{-4} & \ldots & \S{0} & \ldots & \S{1} & \ldots & \S{9} \\
      & & & \absexpr{\emptyset} & & & \\
   };
   \scope[line cap=round]
   \draw (A-1-4) -- (A-2-3) -- (A-3-2) -- (A-4-1) (A-4-1.south) -- (A-5-4);
   \draw (A-1-4) -- (A-2-5) -- (A-3-6) -- (A-4-7) (A-4-7.south) -- (A-5-4);
   \draw (A-3-2) -- (A-4-3) -- (A-3-4) (A-3-4) -- (A-4-5) -- (A-3-6);
   \draw (A-2-3) -- (A-3-4) -- (A-2-5);
   \draw (A-4-3) -- (A-5-4) -- (A-4-5);
   \draw[densely dotted] (A-5-4) -- ++(-1,0.05)  (A-5-4) -- ++(1,0.05);
   \foreach[count=\y] \i in {4,3,2,1} {
      \draw[densely dotted] (A-\y-\i.north west) -- ++(-.4,0.14);
      \node[left=3.5mm] at(A-\y-\i.west) {\footnotesize\ldots};
      \pgfmathsetmacro\other{int(8-\i)}
      \draw[densely dotted] (A-\y-\other.north east) -- ++(.4,0.14);
      \node[right=3.5mm] at(A-\y-\other.east) {\footnotesize\ldots};
   }
   \node[above=3.5mm] (pz) at(A-1-4.north) {\absexpr{\P(\Z)}};
   \draw[densely dotted] (pz) -- ++(-1.25,-0.1) (pz) -- ++(1.25,-0.1);
   \draw[-Kite] ([yshift=1cm,xshift=-3mm]current bounding box.south west) -- ([yshift=-5mm]current bounding box.north west) node[midway,left,font=\scriptsize] {\rotatebox{90}{\absexpr{\partof \asdef\eq \subseteq}}};
   \endscope
\end{tikzpicture}
\end{lrbox}
\begin{frame}{Terminology}
   \begin{itemize}
      \item \textsb{Property}\onslide<2->{ --- Set of states/traces that satisfy that property}\\
            \onslide<3->{\textcolor{gray}{Even integers: \absexpr{\text{P} = \Set{ z \in \Z \Given \exists k \in \Z : z = 2k} = \Set{0, 2, -2, 4, -4, 6, \ldots} \subseteq \P(\tikzmarknode{universe}{\Z})}}}
            \medskip

            \onslide<5->{\centerline{\absexpr{\tikzmarknode{ff}{\emptyset} \subseteq \tikzmarknode{p1}{\text{P}_1} \subseteq \tikzmarknode{p2}{\text{P}_2} \subseteq \tikzmarknode{tt}{\Universe}}}}
            \vspace*{4.9em}

      \item<10-> \textsb{Partial Order} \onslide<11->{--- A \tikzmarknode{reflexive}{reflexive}, \tikzmarknode{transitive}{transitive}, \tikzmarknode{antisymmetric}{antisymmetric} relation on a set\quad{\color{gray}\footnotesize(\enquote{poset})}}\\
            \textcolor{gray}{\onslide<15->{\absexpr{(\Z, \leq)}}\onslide<16->{,\quad\absexpr{(\P(\Z), \subseteq)},\quad\ldots}}
            % domains special kinds of partial orders
   \end{itemize}
   
   \begin{tikzpicture}[overlay,remember picture,line cap=round]
      \onslide<4->{
         \draw[Kite-,gray] ([yshift=-2pt]universe.south) to[out=310,in=180] ++(.4,-.25) node[right] {\small universe (\absexpr{\Universe})};
      }
      \onslide<6->{\draw[Kite-,gray] ([yshift=-2pt]ff.south) to[out=230,in=0] ++(-.4,-.25) node[left] {\small strongest};}
      \onslide<7->{\draw[Kite-,gray] ([yshift=-2pt,xshift=-2pt]p1.south) to[out=260,in=0] ++(-.4,-.55) node[left] {\small stronger};}
      \onslide<8->{\draw[Kite-,gray] ([yshift=-2pt,xshift=-2pt]p2.south) to[out=280,in=180] ++(.4,-.55) node[right] {\small weaker};}
      \onslide<9->{\draw[Kite-,gray] ([yshift=-2pt]tt.south) to[out=310,in=180] ++(.4,-.25) node[right] {\small weakest};}
      
      \onslide<12->{\draw[Kite-,gray] ([yshift=2pt]reflexive.north) to[out=130,in=0] ++(-.4,.215) node[left] {\small \absexpr{\forall x \in X : x \partof x}};}
      \onslide<13->{\draw[Kite-,gray] ([yshift=2pt]transitive.north) -- ++(0,.3) node[above=-1pt] {\small \absexpr{\forall x, y, z \in X : x \partof y \land y \partof z \implies x \partof z}};}
      \onslide<14->{\draw[Kite-,gray] ([yshift=2pt]antisymmetric.north) to[out=50,in=180] ++(.4,.215) node[right] {\kern-1pt\small\absexpr{\forall x, y \in X : x \partof y \land y \partof x \implies x = y}};}
      
      \node[above right,gray,yshift=3.5mm,font=\tiny,text width=.9\paperwidth] at (current page.south west) {\citetitle{cousout2021principles}~\cite[15]{cousout2021principles},\citetitle{DBLP:journals/ftpl/Mine17}~\cite[18]{DBLP:journals/ftpl/Mine17}};
      \onslide<17->{%
      \node[above left,yshift=3.5mm] (@) at(current page.south east) {\scalebox{.65}{\usebox\PowersetZHasse}};
      \node[left,gray,font=\footnotesize,align=right] at(@.west) {Hasse Diagram of\\\absexpr{(\P(\Z), \subseteq)}};
      }
   \end{tikzpicture}
\end{frame}

\newsavebox\HasseWip
\begin{frame}{A Task In-Between}
\begin{lrbox}{\HasseWip}
\begin{tikzpicture}[vert/.style={rectangle,draw,minimum size=2em,rounded corners=4pt},line cap=round]
   \onslide<5->{\node[vert] (0) at (0,0) {\absexpr{\emptyset}};}
   \node[vert] (1) at (-2,1.5) {\absexpr{\Set{-2}}};
   \node[vert] (3) at (0,1.5) {\absexpr{\Set{0}}};
   \node[vert] (2) at (2,1.5) {\absexpr{\Set{3}}};
   \node[vert] (4) at (-2,3) {\absexpr{\Set{ -2, 0 }}};
   \node[vert] (5) at (0,3) {\absexpr{\Set{ -2, 3 }}};
   \node[vert] (6) at (2,3) {\absexpr{\Set{ 0, 3 }}};
   \node[vert] (7) at (0,4.5) {\absexpr{\Set{ -2, 0, 3 }}};
   \scope[every path/.append style={-Kite,line cap=round}]
      \onslide<6->{
         \draw (0) -- (1);
         \draw (0) -- (2);
         \draw (0) -- (3);
      }
      \onslide<7->{
         \draw (1) -- (4);
         \draw (1) -- (5);
         \draw (2) -- (5);
         \draw (2) -- (6);
         \draw (3) -- (4);
         \draw (3) -- (6);
         \draw (4) -- (7);
         \draw (5) -- (7);
         \draw (6) -- (7);
      }
   \endscope
   \onslide<8->{
      \draw[Kite-,gray,line cap=round] (0.east) -- ++(.25,0) node[right,align=left,font=\footnotesize] {least elem.\\[-.5pt]\enquote{\absexpr{\mathbf{\bot}}}};
   }
   \onslide<9->{
      \draw[Kite-,gray,line cap=round] (7.west) -- ++(-.25,0) node[left,align=right,font=\footnotesize] {greatest elem.\\[-.5pt]\enquote{\absexpr{\mathbf{\top}}}};
   }
\end{tikzpicture}
\end{lrbox}
\begin{tikzpicture}[overlay,remember picture]
   \onslide<2->{\node[Rect,yshift=.65cm,align=left,right=5mm,font=\small] (@) at (current page.west) {\normalsize\textbf{Task:}\\
      Consider the Poset \absexpr{(\P(\Set{0, 3, -2}), \subseteq)}.\\
      Draw its Hasse diagram.\\
      Indicate the greatest and smallest element.
   };}
   \onslide<3->{
      % def hasse
      \node[Rect,align=left,below right=5mm,font=\small,xshift=.75cm,text width=6.25cm,yshift=3.5mm] (@2) at (@.south west) {{\normalsize\textbf{Hasse Diagram:}}\\
         A directed graph, with edges from \(a\) to \(b\)~(\(a \neq b\)) indicating that \(a \sqsubseteq b\) without a \(c\) with \(a \sqsubseteq c \sqsubseteq b\).
      };
      \draw[lightgray,-Kite] ([xshift=.35cm]@.south west)
         to[bend right=20] (@2.west);
   }
   \onslide<4-|handout:2>{
      \node[Rect,left=5mm] (@) at(current page.east) {\usebox\HasseWip};
      \node[below right,yshift=1mm,font=\footnotesize\bfseries,align=left] at (@.south west) {Hasse Diagram of \absexpr{\mathbf{(\P(\Set{0, 3, -2}), \subseteq)}}};
   }
\end{tikzpicture}
\end{frame}

\newsavebox\GarrettBirkhoff
\savebox\GarrettBirkhoff{%
\ImageWithRoundedCorners{17.5mm}{garrett-birkhoff.jpg}%
}

\begin{frame}[fragile]{Posets, Lattices, and Chains}
\begin{onlyenv}<1|handout:0>
\begin{tikzpicture}
   \matrix (A) [matrix of nodes, row sep=2.5mm, column sep=-2mm]
   {
       & &  & \kern-4mm\S{-4, 0, 1, 9}\kern-4mm & & & \\
       & & \S{-4,0,1} & \ldots & \S{0,1,9} & & \\
      & \S{-4,0} & \ldots & \S{0,1} & \ldots & \S{1,9} & \\
      \S{-4} & \ldots & \S{0} & \ldots & \S{1} & \ldots & \S{9} \\
      & & & \absexpr{\emptyset} & & & \\
   };
   \scope[line cap=round]
   \draw (A-1-4) -- (A-2-3) -- (A-3-2) -- (A-4-1) (A-4-1.south) -- (A-5-4);
   \draw (A-1-4) -- (A-2-5) -- (A-3-6) -- (A-4-7) (A-4-7.south) -- (A-5-4);
   \draw (A-3-2) -- (A-4-3) -- (A-3-4) (A-3-4) -- (A-4-5) -- (A-3-6);
   \draw (A-2-3) -- (A-3-4) -- (A-2-5);
   \draw (A-4-3) -- (A-5-4) -- (A-4-5);
   \draw[densely dotted] (A-5-4) -- ++(-1,0.05)  (A-5-4) -- ++(1,0.05);
   \foreach[count=\y] \i in {4,3,2,1} {
      \draw[densely dotted] (A-\y-\i.north west) -- ++(-.4,0.14);
      \node[left=3.5mm] at(A-\y-\i.west) {\footnotesize\ldots};
      \pgfmathsetmacro\other{int(8-\i)}
      \draw[densely dotted] (A-\y-\other.north east) -- ++(.4,0.14);
      \node[right=3.5mm] at(A-\y-\other.east) {\footnotesize\ldots};
   }
   \node[above=3.5mm] (pz) at(A-1-4.north) {\absexpr{\P(\Z)}};
   \draw[densely dotted] (pz) -- ++(-1.25,-0.1) (pz) -- ++(1.25,-0.1);
   \draw[-Kite] ([yshift=1cm,xshift=-3mm]current bounding box.south west) -- ([yshift=-5mm]current bounding box.north west) node[midway,left,font=\scriptsize] {\rotatebox{90}{\absexpr{\partof \asdef\eq \subseteq}}};
   \endscope
\end{tikzpicture}
\end{onlyenv}
\begin{onlyenv}<2-|handout:1>
\begin{tikzpicture}
   \matrix (A) [matrix of nodes, row sep=2.5mm, column sep=-2mm]
   {
       & &  & \I{-1}{\infty} & & & \\
       & & \I{-1}{1} & \ldots & \I{0}{9} & & \\
      & \I{-1}{0} & \ldots & \I{0}{1} & \ldots & \I{1}{9} & \\
      \I{-1}{-1} & \ldots & \I00 & \ldots & \I11 & \ldots & \I99 \\
      & & & \absexpr{\bot} & & & \\
   };
   \scope[line cap=round]
   \draw (A-2-3) -- (A-3-2) -- (A-4-1) -- (A-5-4);
   \draw (A-3-6) -- (A-4-7) -- (A-5-4);
   \draw (A-3-2) -- (A-4-3) -- (A-3-4) (A-3-4) -- (A-4-5) -- (A-3-6);
   \draw (A-2-3) -- (A-3-4);
   \draw (A-4-3) -- (A-5-4) -- (A-4-5);
   \draw[densely dotted] (A-2-5) -- (A-1-4) -- (A-2-3) (A-3-4) -- (A-2-5) -- (A-3-6);
   \draw[densely dotted] (A-5-4) -- ++(-1,0.05)  (A-5-4) -- ++(1,0.05);
   \foreach[count=\y] \i in {4,3,2,1} {
      \draw[densely dotted] (A-\y-\i.north west) -- ++(-.4,0.14);
      \node[left=3.5mm] at(A-\y-\i.west) {\footnotesize\ldots};
      \pgfmathsetmacro\other{int(8-\i)}
      \draw[densely dotted] (A-\y-\other.north east) -- ++(.4,0.14);
      \node[right=3.5mm] at(A-\y-\other.east) {\footnotesize\ldots};
   }
   \node[above=3.5mm] (pz) at(A-1-4.north) {\absexpr{\top}};
   \draw[densely dotted] (pz) -- ++(-1.25,-0.1) (pz) -- ++(1.25,-0.1);
   \draw[-Kite] ([yshift=1cm,xshift=-3mm]current bounding box.south west) -- ([yshift=-5mm]current bounding box.north west) node[midway,left,font=\scriptsize] {\rotatebox{90}{\absexpr{\partof \asdef\eq \dot\subseteq}}};
   \endscope
   \pgfonlayer{background}
   \scope[opacity=.175,transparency group]
   \onslide<6->{%
      \draw[red,line width=3mm,rounded corners=2mm,line cap=round] (pz.center) -- ++(1.25,-.42) coordinate (@edge) -- (A-1-4.center) -- (A-2-3.center) -- (A-3-2.center) -- (A-4-1.center) -- (A-5-4.center);
      \foreach \i in {pz,A-1-4,A-2-3,A-3-2,A-4-1,A-5-4} {
         \fill[red,rounded corners=5pt,line cap=round] (\i.south west) rectangle (\i.north east);
      }
   }
   \endscope
   \onslide<4->{
      \draw[Kite-,red,rounded corners=4pt] ([xshift=1.5mm,yshift=-1mm]A-3-4.north) -- ++(.25,.325) -- ++(3,0) node[below right,yshift=.7\baselineskip,align=left] {Least upper bound\\[-2pt]\footnotesize\color{gray}of \IntCC00 and \IntCC11\\[-3pt]\footnotesize\color{gray}lub, join, \absexpr{\lub}};
   }
   \onslide<5->{
      \draw[Kite-,red,rounded corners=4pt] ([xshift=1mm,yshift=1mm]A-4-3.south) -- ++(-.4,-.85) -- ++(-.25,0) node[below left,yshift=.7\baselineskip,align=right] {Greatest lower bound\\[-2pt]\footnotesize\color{gray}of \IntCC{-1}{0} and \IntCC01\\[-3pt]\footnotesize\color{gray}glb, meet, \absexpr{\glb}};
   }
   \onslide<6->{
      \draw[Circle-,red,rounded corners=4pt] ([xshift=-1mm]@edge) -- ++(.35,.5) -- ++(.5,0) node[below right,yshift=.7\baselineskip,align=left] {Chain\\[-2pt]\footnotesize\color{gray}a totally ordered subset\\[-4pt]{\footnotesize\color{gray}\onslide<7->{e.g., \absexpr{\IntCC{0}{0} \partof \IntCC{0}{9} \partof \IntCC{-10}{200}}}}};
   }
   \endpgfonlayer
   \pgfinterruptboundingbox
   \onslide<3->{%
      \draw[Kite-,gray] (A-5-4.south) to[out=-60,in=180] ++(.5,-.25) node[right,font=\scriptsize] {bottom, empty interval};
      \draw[Kite-,gray] (pz.north) to[out=120,in=0] ++(-.5,.25) node[left,font=\scriptsize] {top, \absexpr{\IntCC{-\infty}{\infty}}};
   }
   \endpgfinterruptboundingbox
\end{tikzpicture}
\begin{tikzpicture}[overlay,remember picture]
\onslide<8->{%
   \node[above left,yshift=4.645mm,text width=5.5cm] at(current page.south east) {\textsb{Complete Lattice} \absexpr{(X, \partof, \lub, \glb, \bot, \top)}\vspace{-3.5mm}\footnotesize
   {\begin{itemize} 
      \itemsep-1pt
      \item<9-> \absexpr{(X, \partof)} is a partial order
      \item<10-> \absexpr{\forall A \subseteq X : \lub A} and \absexpr{\glb A} exist
      \item<11-> \absexpr{\bot}/\absexpr{\top} as smallest/largest element
   \end{itemize}}
   };
}
\end{tikzpicture}
\end{onlyenv}
% birkhoff1940lattice
\begin{tikzpicture}[overlay,remember picture]
   \node[above right,gray,yshift=3.5mm,font=\tiny,text width=.9\paperwidth] at (current page.south west) {\citetitle{birkhoff1967lattice}~\cite{birkhoff1967lattice}, see also sublattices~\cite[25]{DBLP:journals/ftpl/Mine17}};
   \onslide<13->{
      \node[below left=4.65mm,yshift=3mm,align=right,font=\tiny,
         href node={https://mathshistory.st-andrews.ac.uk/Biographies/Birkhoff_Garrett/pictdisplay/}
      ] (@bk) at(current page.north east) {%
         \usebox\GarrettBirkhoff\\[1.65pt]
         \textsb{Garrett Birkhoff (1911--96)}\\%
         \color{gray}Paul Halmos
      };
   }
   \onslide<12->{
      \node[above right=5mm,yshift=1.5mm,font=\footnotesize,text width=.6\linewidth] at(current page.south west) {%
         \enquote{Lattice elements (e.g. \IntCC01) define~--- per variable~ --- the abstract state (the abstraction) at a given time or program point!%
         }
      };
   }
\end{tikzpicture}
\end{frame}

\subsection{Abstract Domains}
\begin{frame}{\strut\rlap{\smash{\raisebox{-.4\baselineskip}{\footnotesize\mdseries Pick Your Favorite Lattice!}}}\insertsubsection\hfill\textcolor{gray}{Numerical}}
\vspace*{3.5em}
\tikzset{@/.style={red}}\only<5->{\tikzset{@/.style={gray}}}%
\begin{tikzpicture}[line cap=round]
   \draw[-Kite] (0,-1) -- (0,1) node[below left] {\scriptsize y};
   \draw[-Kite] (-1,0) -- (1,0) node[below left] {\scriptsize x};
\scope[@]
\onslide<2->{%
   \fill (.1,.1) coordinate (@) circle[radius=1.5pt];
   \foreach \x/\y in {.2/.3,-.1/.2,-.3/-.2,.2/-.5,.5/.4,-.8/.7,-.9/-.4,.4/.4,.35/-.4,-.4/.3} {
      \fill (\x,\y) circle[radius=1.5pt];
      \draw[-{Kite[scale=.4]}] (@) -- (\x,\y) coordinate (@);
   }
}
\onslide<3->{%
   \fill (-.4,-.55) circle[radius=1.5pt];
   \fill (.5,-.8) circle[radius=1.5pt];
   \draw[-{Kite[scale=.4]}] (-.4,-.55) -- (.5,-.8);
}
\endscope
\onslide<4->{%
   \node[below=1mm] at(current bounding box.south) {\scriptsize Collecting Semantics};
}
\end{tikzpicture}\hfill\onslide<5->{%
\tikzset{@/.style={red}}\only<8->{\tikzset{@/.style={gray}}}%
\begin{tikzpicture}[line cap=round]
   \draw[-Kite] (0,-1) -- (0,1) node[below left] {\scriptsize y};
   \draw[-Kite] (-1,0) -- (1,0) node[below left] {\scriptsize x};
\pgfonlayer{background}
\scope[@]
\onslide<6->{%
   \fill[@,opacity=.4] (-.4,-1) rectangle (.7,1);
   \draw[gray,thin] (-.4,-1) -- ++(0,2);
   \draw[gray,thin] (.7,-1) -- ++(0,2);
}
\endscope
\endpgfonlayer
\onslide<7->{%
   \node[below=1mm,align=center] at(current bounding box.south) {\clap{\scriptsize Intervals \absexpr{x \in \IntCC ab}}\smash{\raisebox{-.7\baselineskip}{\clap{\scriptsize\color{lightgray}\absexpr{y \in \IntCC{-\infty}{\infty}}}}}};
}
\end{tikzpicture}}\hfill\onslide<9->{%
\tikzset{@/.style={red}}\only<11->{\tikzset{@/.style={gray}}}%
\begin{tikzpicture}[line cap=round]
   \draw[-Kite] (0,-1) -- (0,1) node[below left] {\scriptsize y};
   \draw[-Kite] (-1,0) -- (1,0) node[below left] {\scriptsize x};
\scope[@]
\onslide<10->{%
   \foreach \x in {-1,-.7,...,1} {
      \foreach \y in {-.9,-.6,...,1} {
         \fill (\x,\y) circle[radius=1.5pt];
      }
   }
}
\endscope
\onslide<10->{%
   \node[below=1mm] at(current bounding box.south) {\clap{\scriptsize Simple Congruences}};
}
\end{tikzpicture}}\hfill\onslide<11->{%
\tikzset{@/.style={red}}\only<13->{\tikzset{@/.style={gray}}}%
\begin{tikzpicture}[line cap=round]
   \draw[-Kite] (0,-1) -- (0,1) node[below left] {\scriptsize y};
   \draw[-Kite] (-1,0) -- (1,0) node[below left] {\scriptsize x};
\scope[@]
\onslide<12->{%
   \fill[opacity=.4,@] (-.5,-.3) |- ++(.8,.6) -- ++(0,-.4) -- ++(-.2,-.2) -- cycle;
   \draw[gray,thin] (-.5,-.3) |- ++(.8,.6) -- ++(0,-.4) -- ++(-.2,-.2) -- cycle;
   \draw[thick,@] (.6,.2) -- ++(-.8,-.8);
}
\endscope
\onslide<12->{%
   \node[below=1mm] at(current bounding box.south) {\clap{\scriptsize Pentagons}};
}
\end{tikzpicture}}
\medskip
\begin{multicols}{4}
\begin{itemize}
   \item<14-> Octagons
   \item<15-> Ellipses
   \item<16-> Exponentials
   \item<17-> Signs
\end{itemize}
\end{multicols}
\begin{tikzpicture}[overlay,remember picture]
   \node[above right,gray,yshift=3.5mm,font=\tiny,text width=.9\paperwidth] at (current page.south west) {\citetitle{cousout2021principles}~\cite{cousout2021principles}, \citetitle{DBLP:conf/sac/LogozzoF08}~\cite[25]{DBLP:conf/sac/LogozzoF08}};
\end{tikzpicture}
% non relational: pointer, shapes, cost, ...
\end{frame}

\subsection{Sign Analysis}
\begin{frame}[fragile]{\insertsubsection\hfill\textcolor{gray}{Simple Sign Domain}}
\begin{itemize}
   \item<3-> We still have no program semantics, but we can try\ldots
\begin{minted}[escapeinside=||,lineskip=1pt]{java}
int a = 0; |\tikzmark{n@a1}|
int b = 12; |\tikzmark{n@b1}|
int c = a + b; |\tikzmark{n@c1}|
int d = c - b; |\tikzmark{n@d1}|
\end{minted}
\begin{tikzpicture}[overlay,remember picture]
   \onslide<4->{%
      \coordinate (n@a1) at (pic cs:n@a1);
      \node[right=2cm] (n@a1) at (n@a1) {\AbstractInfo{a = 0}};
   }%
   \onslide<5->{%
      \coordinate (n@b1) at (pic cs:n@b1);
      \node[right] at (n@b1-|n@a1.west) {\AbstractInfo{b \geq 0}};
   }%
   \onslide<6->{%
      \coordinate (n@c1) at (pic cs:n@c1);
      \node[right] at (n@c1-|n@a1.west) {\AbstractInfo{c \geq 0\quad (={} 0~{}+{}\geq 0)}};
   }%
   \onslide<7->{%
      \coordinate (n@d1) at (pic cs:n@d1);
      \node[right] (n@d1) at (n@d1-|n@a1.west) {\AbstractInfo{d = \top\kern-1.5pt\quad (\geq{} 0~{}-{}\geq 0)}};
   }
\end{tikzpicture}\bigskip
   \item<8-> But, how do we know that \bjava{int a = 0;} implies \AbstractInfo{a = 0}?\vspace{2pt}
   \begin{itemize}
      \itemsep3.5pt
      \item<9-> Language Semantics\quad\textcolor{gray}{\footnotesize(we get to those later)}
      \item<10-> Galois Connections
   \end{itemize}
\end{itemize}

\begin{tikzpicture}[overlay,remember picture]
   \onslide<2->{\node[above left=.5mm,yshift=3.5mm] at(current page.south east) {\usebox\SimpleSignLattice};}
\end{tikzpicture}
\end{frame}

\subsection{Galois Connections}
\newsavebox\EvaristeGalois
\savebox\EvaristeGalois{%
\ImageWithRoundedCorners{17.5mm}{evariste-galois.jpg}
}

\begin{frame}{Galois Connection --- Linking Posets\,\rlap{\textsubscript{\textcolor{gray}{\scriptsize(small detour)}}}\textsuperscript{\footnotesize\cite[110]{cousout2021principles}}}
\begin{center}
   \onslide<2->{How do we know that \bjava{int a = 0;} implies \AbstractInfo{a = 0}?}\medskip\\
   \onslide<3->{A tale of two lattices\ldots}
\end{center}
\begin{center}
   \begin{tikzpicture}
   
   \onslide<4->{\node[Rect,align=center] (concrete) {\textsb{Concrete Domain}\\\absexpr{(C, \sqsubseteq_C)}};}
   \onslide<5->{
      \draw[Kite-,gray,line cap=round] ([xshift=-1.125cm]concrete.south) to[out=-90,in=180] ++(.5,-.65) node[below right,yshift=.7\baselineskip,font=\footnotesize,gray,align=flush left,text width=3.5cm] {This is the (usually infinite and unknown) ground truth, the reality};
   }
   \onslide<6->{
      \node[Rect,align=center,right=3.75cm] (abstract) at (concrete.east) {\textsb{Abstract Domain}\\\absexpr{(A, \sqsubseteq_A)}};
   }
   \onslide<7->{
      \draw[Kite-,gray,line cap=round] ([xshift=1.125cm]abstract.south) to[out=-90,in=0] ++(-.5,-.65) node[below left,yshift=.7\baselineskip,font=\footnotesize,gray,align=flush right,text width=3.5cm] {%
         The abstract domain we choose, e.g., intervals
      };
   }
   \onslide<8->{
      \draw[-Kite] (concrete.12) to[bend left=8] node[midway,above,font=\small] {\absexpr{\alpha}\rlap{\color{lightgray}\footnotesize~abstraction}} (abstract.168);
   }
   \onslide<9->{
      \draw[-Kite] (abstract.192) to[bend left=8] node[midway,below,font=\small] {\absexpr{\gamma}\rlap{\color{lightgray}\footnotesize~concretization}} (concrete.348);
   }
\end{tikzpicture}
\end{center}
\onslide<10->{Beware, beware, conversions may be lossy!}\vspace{-.85\baselineskip}
\begin{multicols}{2}
\begin{itemize}
   \item<11-> \color{gray}\absexpr{\forall x\forall y: \alpha(x) \sqsubseteq_A y \iff x \sqsubseteq_C \gamma(y)}\\*
      % \onslide<11->{\footnotesize\color{gray}%
      %    \textit{y} is an upper bound for the abstraction of \textit{x} iff \textit{x} is a lower bound for the concretization of \textit{y}.
      % }
   \item<11-> \color{gray}\absexpr{\forall x\forall y: x \sqsubseteq_C \gamma(\alpha(x)) \quad\text{and}\quad \alpha(\gamma(y)) \sqsubseteq_A y}
\end{itemize}
\end{multicols}\vspace{-4.5mm}

\onslide<12->{\centerline{\small\enquote{%
   We can abstract \(x \in \{1, 2\}\) with \absexpr{\alpha(x) = \IntCC12} or \absexpr{\alpha(x) = \IntCC{-5}{42}}, but \textit{not} (e.g.) with \absexpr{\alpha(x) = \IntCC11}!
}\rlap{\begin{tikzpicture}[overlay,remember picture]
   % died very early
   \onslide<13->{
      \node[below left=4.15mm,yshift=2.5mm,xshift=1.5mm,align=right,font=\tiny,
         href node={https://web.archive.org/web/20250808020005/https://mathshistory.st-andrews.ac.uk/Biographies/Galois/}
      ] (@g) at(current page.north east) {%
         \usebox\EvaristeGalois\\[1.65pt]
         \textsb{Évariste Galois (1811--32)}\\%
         \color{gray}Public Domain\\
         \color{lightgray}died in a duel for love
      };
   }
\end{tikzpicture}}}}
\end{frame}

\begin{frame}{Happy Abstractions}
\begin{itemize}
   \itemsep12pt
   \item<2-> Suppose, you use the interval domain, what are your best abstractions if \texttt{u} is an unknown integer?\vspace{-.5\baselineskip}
   \begin{multicols}{2}
   \begin{itemize}
      \item<3-> \absexpr{\alpha(\text{\!\bjava{u}}) = \onslide<4-|handout:2>{\IntCC{-\infty}{\infty}}}
      \item<3-> \absexpr{\alpha(\text{\!\bjava{u + 1}}) = \onslide<5-|handout:2>{\IntCC{-\infty}{\infty}}}
      \item<3-> \absexpr{\alpha(\text{\!\bjava{u * 0}}) = \onslide<6-|handout:2>{\IntCC00}}
      \item<3-> \absexpr{\alpha(\text{\!\bjava{sin(u)}}) = \onslide<7-|handout:2>{\IntCC{-1}{1}}}
   \end{itemize}
   \end{multicols}
   \item<8-> What is the best concretization of \absexpr{\IntCC{-5}{5}}? What do we loose?\\
   \onslide<9-|handout:2>{%
      \absexpr{\gamma(\IntCC{-5}{5}) = \Set{-5, -4, \ldots, 4, 5}}. We loose\ldots
      \begin{itemize}
         \item \footnotesize Exact values and distribution information
         \item \footnotesize Relational information (e.g., \bjava{x = u; y = x + 1;})
         \item \footnotesize Potential sequences (e.g., \bjava{for(i=0; i<n; i++) :ldots:})
      \end{itemize}
   }
   \item<10-|handout:2> But, how do we handle loops? Recursion?
\end{itemize}   
\end{frame}

\newsavebox\AlfredTarski
\savebox\AlfredTarski{%
\ImageWithRoundedCorners{17.5mm}{alfred-tarski.jpg}%
}

\subsection{Fixpoints}
\begin{frame}{\insertsubsection}
   \begin{itemize}
      \itemsep10pt
      \item<2-> For operators \(f: X \to X\) a \textsb{fixpoint} is a \(x \in X\) such that \(f(x) = x\)
      \item<3-> If we iterate \(f\) starting from some \(x_0 \in X\):\medskip
      \begin{itemize}[--]
         \itemsep15pt
         \item<4-> \parbox{3.25cm}{\smash{\tikz[baseline=-.85mm,gray]{\coordinate (@) at (0,0);\fill (@) circle[radius=2pt] node[below] {\tiny\(x_0\)};\foreach \i in {0,...,3} {
            \draw[-Kite] (@) -- ++(.5,0) coordinate[xshift=1pt] (@);
            \fill (@) circle[radius=2pt] node[below] {\tiny\(f_\i\)};
         }; \draw[Kite-,red,line cap=round] ([xshift=-1pt]@) to[out=120,in=60,looseness=10] ([xshift=2pt]@);}}} \onslide<5->{reach a fixpoint, \(f^p = f(f^p)\)}%\hfill\textcolor{gray}{\footnotesize\absexpr{f : \N \to \N, f(x) = x}}
         \item<6-> \parbox{3.25cm}{\smash{\tikz[baseline=-.85mm,gray]{\coordinate (@) at (0,0);\fill (@) circle[radius=2pt] node[below] {\tiny\(x_0\)};\foreach \i in {0,...,3} {
            \draw[-Kite] (@) -- ++(.5,0) coordinate[xshift=1pt] (@) coordinate (@\i);
            \fill (@) circle[radius=2pt] node[below] {\tiny\(f_\i\)};
         }; \draw[-Kite,red,line cap=round] (@) to[out=70,in=60] (@1);}}} \onslide<7->{reach a cycle, \(f^{p + \ell} = f^p, \ell > 0\)}% \hfill\textcolor{gray}{\footnotesize\absexpr{f : \N \to \N, f(x) = x + 1}}
         \item<8-> \parbox{3.25cm}{\smash{\tikz[baseline=-.85mm,gray]{\coordinate (@) at (0,0);\fill (@) circle[radius=2pt] node[below] {\tiny\(x_0\)};\foreach \i in {0,...,3} {
            \draw[-Kite] (@) -- ++(.5,0) coordinate[xshift=1pt] (@) coordinate (@\i);
            \fill (@) circle[radius=2pt] node[below] {\tiny\(f_\i\)};
         }; \draw[densely dotted,semithick] (@) -- ++(0.42,0)}}} \onslide<9->{iterate forever, \(\forall p \neq q \in \mathbb{N} : f^{p} \neq f^q\)}\hfill\textcolor{gray}{\footnotesize\absexpr{f : \N \to \N, f(x) = x + 1}}
      \end{itemize}
      \item<10-> If our function is monotonic, we can always find a fixpoint\textsuperscript{\cite{tarski1955lattice}} \tikzmarknode{tarski}{\strut}
      \item<13-> Analyzing, e.g. loops, we \enquote{go up} the lattice until we reach a least fixpoint
      \item<14-> We only need Widening if the lattice has an infinite ascending chain!
   \end{itemize}
\begin{tikzpicture}[overlay,remember picture]
   \node[above right,gray,yshift=3.5mm,font=\tiny,text width=.9\paperwidth] at (current page.south west) {\citetitle{tarski1955lattice}~\cite{tarski1955lattice}, \citetitle{kleene1952introduction}~\cite{kleene1952introduction}, \citetitle{cousout2021principles}~\cite[165]{cousout2021principles}};
   \onslide<11->{%
      \draw[-Kite,line cap=round,gray] ([yshift=1.5pt]pic cs:tarski) to[out=0,in=180] ++(.5,.25) node[right,font=\tiny,align=left] {for complete, nonempty lattices\\Tarski's Theorem};
   }
   \onslide<12->{
      \node[below left=4.65mm,yshift=3mm,align=right,font=\tiny,
         href node={https://web.archive.org/web/20250806210450/https://opc.mfo.de/detail?photo_id=6091}
      ] (@bk) at(current page.north east) {%
         \usebox\AlfredTarski\\[1.65pt]
         \textsb{Alfred Tarski (1901--83)}\\%
         \color{gray}\ccbysa~2.0~Oberwolfach\\\color{gray}Photo Collection
      };
   }
\end{tikzpicture}
\note[itemize]{
   \item You know fixpoints from LaTeX (recompilations until stable)
}
\end{frame}

\subsection{Interval Analysis, I}

\begin{lrbox}{\SimpleSignLattice}
\scriptsize
\begin{tikzpicture}[line cap=round,x=6.5mm,y=6.5mm,gray]
   \node (top) at (0,0) {\absexpr{\top}};
   \node (pos) at (-1,-1) {\absexpr{\geq 0}};
   \node (neg) at (1,-1) {\absexpr{\leq 0}};
   \node (zero) at (0,-2) {\absexpr{0}};
   \node (bot) at (0,-3) {\absexpr{\bot}};
   \draw (top) -- (pos) -- (zero) -- (neg) -- (top) (zero) -- (bot);
\end{tikzpicture}
\end{lrbox}
\newsavebox\IntervalLattice

\def\mark{\color{red}\let\I\MarkedI}
\def\MarkedI#1#2{\footnotesize\absexpr{\mathbf{\IntCC{#1}{#2}}}}
\begin{frame}[fragile]{\insertsubsection\quad\textcolor{gray}{\footnotesize(the intuitive approach)}}
\begin{lrbox}{\IntervalLattice}
\scriptsize
\begin{tikzpicture}[line cap=round,x=6.5mm,y=6.5mm,gray]
   \matrix (A) [matrix of nodes, row sep=2.5mm, column sep=-2mm]
   {
       & &  & \I{-1}{\infty} & & & \\
       & & \I{-1}{1} & \ldots & \only<12-|handout:3>{\mark}\I{0}{2} & & \\
      & \I{-1}{0} & \ldots & \only<9-11|handout:2>{\mark}\I{0}{1} & \ldots & \I{1}{2} & \\
      \I{-1}{-1} & \ldots & \only<4-8|handout:1>{\mark}\I00 & \ldots & \only<7-8|handout:1>{\mark}\I11 & \ldots & \I22 \\
      & & & \absexpr{\bot} & & & \\
   };
   \scope[line cap=round]
   \draw (A-2-3) -- (A-3-2) -- (A-4-1) -- (A-5-4);
   \draw (A-3-6) -- (A-4-7) -- (A-5-4);
   \draw (A-3-2) -- (A-4-3) -- (A-3-4) (A-3-4) -- (A-4-5) -- (A-3-6);
   \draw (A-2-3) -- (A-3-4) (A-3-4) -- (A-2-5) -- (A-3-6);
   \draw (A-4-3) -- (A-5-4) -- (A-4-5);
   \draw[densely dotted] (A-2-5) -- (A-1-4) -- (A-2-3);
   \draw[densely dotted] (A-5-4) -- ++(-1,0.05)  (A-5-4) -- ++(1,0.05);
   \foreach[count=\y] \i in {4,3,2,1} {
      \draw[densely dotted] (A-\y-\i.north west) -- ++(-.4,0.14);
      \node[left=3.5mm] at(A-\y-\i.west) {\footnotesize\ldots};
      \pgfmathsetmacro\other{int(8-\i)}
      \draw[densely dotted] (A-\y-\other.north east) -- ++(.4,0.14);
      \node[right=3.5mm] at(A-\y-\other.east) {\footnotesize\ldots};
   }
   \node[above=3.5mm] (pz) at(A-1-4.north) {\absexpr{\top}};
   \draw[densely dotted] (pz) -- ++(-1.25,-0.1) (pz) -- ++(1.25,-0.1);
   \endscope
\end{tikzpicture}
\end{lrbox}\vspace*{-2.65em}%
\begin{tikzpicture}[Rect/.append style={font=\scriptsize,align=left,inner sep=3.5pt},remember picture]
   \node[Rect] (int@i1) at (0,0) {\bjava{int x = 0;}};
   \node[Rect,below=2mm,rounded corners=9pt] (int@i2) at (int@i1.south) {\bjava{x < 2}};
   \node[Rect,below=1mm,xshift=11.5mm] (int@i3) at (int@i2.south) {\bjava{x = x + 1;}};
   \node[Rect,below=-1mm,double,draw=gray,text=gray] (int@i4) at (int@i3.south-|int@i2.south) {\textit{end}};   
   \draw[gray,Link] (int@i1) -- (int@i2);
   \draw[Link] (int@i2.east) -| (int@i3.north) node[pos=.75,right,font=\scriptsize] {T};
   \draw[gray,Link] ([xshift=6mm]int@i3.north) |- ([yshift=2mm]int@i2.east);
   \draw[Link] (int@i2.south) -- (int@i4.north) node[midway,left,font=\scriptsize] {F};
\end{tikzpicture}
\begin{tikzpicture}[overlay,remember picture]
   \onslide<3->{%
      \node[right=3cm] (int@i1) at (int@i1) {\AbstractInfo{x_0 \in \IntCC00 }};
   }%
   \onslide<5->{%
      \node[above right,yshift=-1.5pt] (int@i2a) at (int@i2-|int@i1.west) {\AbstractInfo{\only<8-9,12|handout:2,3>{\boldmath}\text{\textcolor{gray}{\scriptsize[pre]}~}x_1 \in \only<-8|handout:1>{\IntCC00}\only<9-11|handout:2>{\IntCC01\quad (\IntCC00 \cup \IntCC11)}\only<12-|handout:3>{\IntCC02\quad (\IntCC01 \cup \IntCC12)}}};
   }%
   \onslide<6->{%
      \node[below right,yshift=1.5pt] (int@i3a) at (int@i2-|int@i1.west) {\AbstractInfo{\only<10|handout:0>{\boldmath}\text{\textcolor{gray}{\scriptsize[in]}~}x_2 \in \only<-9|handout:1>{\IntCC00\quad (\IntCC00 \cap \IntOC{-\infty}1)}\only<10-|handout:2>{\IntCC01\quad (\IntCC01 \cap \IntOC{-\infty}1)}}};
   }%
   \onslide<7->{%
      \node[right] (int@i3) at (int@i3-|int@i1.west) {\AbstractInfo{\only<11|handout:0>{\boldmath}\text{}x_3 \in \only<-10|handout:1>{\IntCC11\quad (\IntCC00 \oplus \IntCC11)}\only<11-|handout:2>{\IntCC12\quad (\IntCC01 \oplus \IntCC11)}}};
   }
   \onslide<13-|handout:3>{%
      \node[right] (int@i4) at (int@i4-|int@i1.west) {\AbstractInfo{\text{\textcolor{gray}{\scriptsize[post]}~}x_4 \in \IntCC22 \quad (\IntCC02 \cap \IntCO2{\infty})}};
   }
   \onslide<14-|handout:3>{
      \node[right=4.95cm] (int@i1@sign) at (int@i1.east) {\AbstractInfo{x_0 = 0}};
      \node[right] at (int@i2a-|int@i1@sign.west) {\AbstractInfo{\text{\textcolor{gray}{\scriptsize[pre]}~}x_1 \geq 0}};
      \node[right] at (int@i3a.east-|int@i1@sign.west) {\AbstractInfo{\text{\textcolor{gray}{\scriptsize[in]}~}x_2 \geq 0}};
      \node[right] at (int@i3-|int@i1@sign.west) {\AbstractInfo{x_3 \geq 0}};
      \node[right] at (int@i4-|int@i1@sign.west) {\AbstractInfo{\text{\textcolor{gray}{\scriptsize[post]}~}x_4 \geq 0}};
      \node[above] at(int@i1@sign.north) {\footnotesize Signs};
      \node[above] at(int@i1.north) {\footnotesize Intervals};
   }
\end{tikzpicture}

\begin{tikzpicture}[overlay,remember picture]
   \onslide<2->{\node[above left=.5mm,yshift=3.5mm] at(current page.south east) {\scalebox{.85}{\usebox\IntervalLattice}};}
   \onslide<15->{
      \node[above right=.5mm,yshift=3.5mm] at (current page.south west) {\scalebox{.85}{\usebox\SimpleSignLattice}};
   }
\end{tikzpicture}
\end{frame}

\def\CurrentSectionComment{What does my program mean?}
\section{Semantics}

\def\Comment#1{\kern-2pt\textcolor{gray}{\footnotesize(\absexpr{#1})}}
\def\Kw#1{\textbf{\small#1}}
\def\stm{\mathcolor{red}{stm}}
\def\expr{\mathcolor{red}{expr}}
\def\cond{\mathcolor{red}{cond}}

\begin{frame}[fragile]{\insertsection}
\frametitle<2-|handout:1>{\textcolor{gray}{Semantics}\qquad Program Syntax (simplified)}
\begin{uncoverenv}<3-|handout:1>
\begin{minted}[lineskip=14pt,escapeinside=||]{java}
int |\tikzmarknode{sem-var-x}{\strut}|x |\tikzmarknode{sem-assign}{\strut}|= |\tikzmarknode{sem-num-const}{\strut}|0;|\tikzmarknode{sem-seq}{\strut}|
|\tikzmarknode{sem-loop}{\strut}|while(x |\tikzmarknode{sem-bin-cmp}{\strut}|< 2) {
   x = x |\tikzmarknode{sem-bin-exp}{\strut}|+ 1;
}
\end{minted}
\begin{tikzpicture}[overlay,remember picture,line cap=round,gray]
   \onslide<4->{%
      \draw[Kite-] ([xshift=2.85pt,yshift=6pt]pic cs:sem-var-x) to[out=60,in=180] ++(.5,.6) node[right,font=\scriptsize] {Variable~\absexpr{v \in \Variables}};
   }
   \onslide<5->{%
      \draw[Kite-] ([xshift=2.85pt,yshift=5pt]pic cs:sem-assign) to[out=50,in=180] ++(.5,.25) node[right,font=\scriptsize] {Assignment};
   }
   \onslide<6->{%
      \draw[Kite-] ([xshift=3pt,yshift=-.5pt]pic cs:sem-num-const) to[out=-50,in=180] ++(.5,-.3) node[right,font=\scriptsize] {Numeric Constant~\absexpr{c\in \NumericDomain}};
   }
   \onslide<7->{%
      \draw[Kite-] ([xshift=1pt]pic cs:sem-seq) -- ++(0.42,0) node[right,font=\scriptsize] {Sequence};
   }
   \onslide<8->{%
      \draw[Kite-] ([xshift=13pt,yshift=7.5pt]pic cs:sem-loop) to[out=70,in=180] ++(.25,.3) node[right,font=\scriptsize] {Loop};
   }
   \onslide<9->{%
      % sem-bin-cmp
      \draw[Kite-] ([xshift=3pt,yshift=-1pt]pic cs:sem-bin-cmp) to[out=-50,in=180] ++(.5,-.25) node[right,font=\scriptsize] {Comparison \absexpr{\AnyCompare \in \{\leq, <, ~\ldots\}}};
   }
   \onslide<10->{
      \draw[Kite-] ([xshift=3pt,yshift=-.5pt]pic cs:sem-bin-exp) to[out=-50,in=180] ++(.5,-.25) node[right,font=\scriptsize] {Binary Expression};
   }
\end{tikzpicture}
\end{uncoverenv}
% https://craftinginterpreters.com/representing-code.html#rules-for-grammars
\begin{tikzpicture}[overlay,remember picture]
   \node[above right,gray,yshift=3.5mm,font=\tiny,text width=.9\paperwidth] at (current page.south west) {Shortened form of \citetitle{DBLP:journals/ftpl/Mine17}~\cite[46]{DBLP:journals/ftpl/Mine17}, \href{https://web.archive.org/web/20241121192150/https://craftinginterpreters.com/representing-code.html#rules-for-grammars}{craftinginterpreters.com/representing-code.html}};
   \onslide<11->{
      \node[left=2mm] at(current page.east) {\small
\begin{bnf}
\(\stm\) ::=
   | \absexpr{V \leftarrow \expr} : \Comment{\text{assignment}, V \in \Variables}
   | \absexpr{\stm_1;~\stm_2} : \Comment{\text{sequence}}
   | \absexpr{\Kw{while}(\cond)~\{~\stm~\}} : \Comment{\text{loop}}
   ;;
\(\expr\) ::=
   | \(V\) : \Comment{\text{variable}, V \in \Variables}
   | \(c\) : \Comment{\text{constant}, c \in \NumericDomain}
   | \(\expr_1 \diamond \expr_2\) : \Comment{\text{bin. expr.}, \diamond \in \{+, -, ~\ldots\}}
   ;;
\(\cond\) ::= 
   | \(b\) : \Comment{\text{boolean}, b \in \BooleanDomain}
   | \(\expr_1 \bowtie \expr_2\) : \Comment{\text{comparison}, \bowtie \in \{\leq, <, ~\ldots\}}
   ;;
\end{bnf}
      };
   }
\end{tikzpicture}
\end{frame}

\begin{frame}[fragile,t]{Atomic Expression Semantics}
\begin{minted}[escapeinside=||]{java}
int |\tikzmarknode{bsem-var-x}{\strut}|x |\tikzmarknode{bsem-assign}{\strut}|= |\tikzmarknode{bsem-num-const}{\strut}|0;|\tikzmarknode{bsem-seq}{\strut}|
|\tikzmarknode{bsem-loop}{\strut}|while(x |\tikzmarknode{bsem-bin-cmp}{\strut}|< 2) {
   x = x |\tikzmarknode{bsem-bin-exp}{\strut}|+ 1;
}
\end{minted}
% https://craftinginterpreters.com/representing-code.html#rules-for-grammars
\begin{tikzpicture}[overlay,remember picture]
   \node[above right,gray,yshift=3.5mm,font=\tiny,text width=.9\paperwidth] at (current page.south west) {Shortened form of \citetitle{DBLP:journals/ftpl/Mine17}~\cite[46]{DBLP:journals/ftpl/Mine17}, \href{https://web.archive.org/web/20241121192150/https://craftinginterpreters.com/representing-code.html#rules-for-grammars}{craftinginterpreters.com/representing-code.html}};
      \node[left=2mm,yshift=6em] at(current page.east) {\small%
\begin{bnf}
\(\expr\) ::=
   | \(V\) : \Comment{\text{variable}, V \in \Variables}
   | \(c\) : \Comment{\text{constant}, c \in \NumericDomain}
   | \(\expr_1 \diamond \expr_2\) : \Comment{\text{bin. expr.}, \diamond \in \{+, -, ~\ldots\}}
   ;;
\end{bnf}
      };
\end{tikzpicture}\vspace*{-7mm}
\begin{itemize}
   \itemsep12pt
   \item<2-> We use an environment \absexpr{\Environments \asdef\eq \tikzmarknode{node@variables}{\Variables} \to \tikzmarknode{node@integers}{\NumericDomain}} to represent the current program state
   \item<6-> Now we can define \absexpr{\text{evalExpr}(\expr \tikzmarknode{formal-expr-eval}{\mathcolor{black}{,}}~env)} for an environment \absexpr{env \in \Environments}\vspace*{-1mm}
      {\small\begin{equation*}
         \begin{array}{lcl}
         \onslide<8->{\text{evalExpr}(V,~env)} &\onslide<8->{\absexpr{\asdef\eq}}& \onslide<8->{env(V)\tikzmarknode{value-by-env}{\strut}} \\
         \onslide<10->{\text{evalExpr}(c,~env)} &\onslide<10->{\absexpr{\asdef\eq}}& \onslide<10->{c} \\
         \onslide<11->{\text{evalExpr}(\expr_1 + \expr_2,~env)} &\onslide<11->{\absexpr{\asdef\eq}}& \onslide<11->{\text{evalExpr}(\expr_1,~env) + \text{evalExpr}(\expr_2,~env)} \\
         & \onslide<12->{\vdots} & 
      \end{array}
      \end{equation*}}
   \item<13-> Additionally, we can define \absexpr{\text{evalCond}(\cond\tikzmarknode{formal-cond-eval}{\mathcolor{black}{,}}~envs)} and \absexpr{\text{evalStm}(\stm\tikzmarknode{formal-stm-eval}{\mathcolor{black}{,}}~envs)}
\end{itemize}  
\begin{tikzpicture}[overlay,remember picture,line cap=round]
\scope[gray]
\onslide<3->{%
\draw[Kite-] ([yshift=9pt]pic cs:node@variables) to[out=110,in=0] ++(-.5,.33) node[left,font=\scriptsize] {Variable};%
}
\onslide<4->{%
\draw[Kite-] ([yshift=9pt]pic cs:node@integers) to[out=70,in=180] ++(.5,.33) node[right,font=\scriptsize] {Integer Values};
}
\onslide<5->{
   \node[below left,xshift=-4mm,yshift=8.95mm,gray] at(current page.east) {\small%
      \begin{tabular}{l@{\hskip4pt}c}
         \absexpr{\Variables} & \absexpr{\NumericDomain} \\
         \hline
         \absexpr{x} & \absexpr{0} \\
         \absexpr{c} & \absexpr{5} \\
      \end{tabular} 
   };
}
\onslide<7->{%
   \draw[Kite-] ([yshift=8pt]pic cs:formal-expr-eval) to[out=110,in=0] ++(-.5,.25) node[left,font=\scriptsize] {Usually written as \absexpr{\EvaluateExpr{expr}\Environment}};
}
\onslide<9->{%
   \draw[Kite-] ([xshift=1pt,yshift=2pt]pic cs:value-by-env) to[out=10,in=190] ++(.6,.2) node[right,font=\scriptsize] {Value of \absexpr{V \in \Variables} in Environment~\(env\)};
}
\onslide<14->{%
   \draw[Kite-] ([yshift=8pt]pic cs:formal-cond-eval) to[out=120,in=0] ++(-.5,.25) node[left,font=\scriptsize] {\absexpr{\EvaluateCond{cond}\SetOfStates}};
}
\onslide<15->{%
   \draw[Kite-] ([yshift=8pt]pic cs:formal-stm-eval) to[out=120,in=0] ++(-.5,.25) node[left,font=\scriptsize] {\absexpr{\EvaluateStatement{stm}\SetOfStates}};
}
\endscope
\end{tikzpicture}
\end{frame}

\begin{frame}{Denotational Semantics\qquad \textcolor{gray}{while loops}}
   \begin{center}
      \hspace*{-14em}\onslide<2->{\tikzmarknode{while-loop-node}{\absexpr{\Kw{while}(\cond)~\{~\stm~\}}}}
   \end{center}
   % we reach fixpoint in the abstract due to tarki and kleene and the fact that we have this lfp on the chain. consideration afterwards does no longer have tro reflect infinite iteration as we intersect with the not condition fact
   \begin{tikzpicture}[overlay,remember picture,line cap=round]
      \onslide<3->{\draw[Kite-] (while-loop-node.north) -- ++(0,.35) node[above,font=\footnotesize] {Suppose we start the loop with states \absexpr{Start}};}
      \onslide<4->{%
         \draw[-Kite] (while-loop-node.south east) to[out=-30,in=30,looseness=6] node[pos=.5,right,align=left] {%
            \absexpr{F(X) \asdef\eq Start \cup evalStm(\stm,~evalCond(\cond,~X))}\\[-4pt]
            \color{gray}\scriptsize iterate to find the least fixpoint~\cite[52]{DBLP:journals/ftpl/Mine17}
         } (while-loop-node.north east);
      }
      \onslide<5->{%
         \draw[-Kite] ([yshift=-1pt]while-loop-node.south) -- ++(0,-.5)
            node[below,font=\footnotesize] {Keep only states~\absexpr{S} with \absexpr{evalCond(\lnot \cond,~S)}};
      }
      \onslide<6->{%
         \node[above=2cm] (@) at(current page.south) {There are alternatives (e.g., equation systems, \cite[part~7]{cousout2021principles})}; % denotational semantics follow the control flow
      }
      \onslide<7->{%
         \node[below=5mm,align=center,text width=.75\paperwidth] (@ad) at(@.south) {We achieve their abstract counterpart using the same principles but for abstract domains!};
      }
      \onslide<8->{
         \draw[Kite-,gray,line cap=round] ([yshift=2.75mm,xshift=-2.1cm]@ad.south east) to[out=20,in=180] ++(.4,.3) node[below right,font=\scriptsize,yshift=.7\baselineskip,align=left] {Usually written as\\\absexpr{\RawEvaluateStatement\isAbstract, \RawEvaluateCond\isAbstract, \RawEvaluateExpr\isAbstract,~\ldots}};
      }
   \end{tikzpicture}
\end{frame}

\subsection{Interval Analysis, II}
\begin{frame}[fragile]{\insertsubsection}
\vspace*{2.5em}
\begin{onlyenv}<1|handout:0>
\begin{tikzpicture}[Rect/.append style={font=\scriptsize,align=left,inner sep=3.5pt}]
   \node[Rect] (int@i1) at (0,0) {\bjava{int x = 0;}};
   \node[Rect,below=2mm,rounded corners=9pt] (int@i2) at (int@i1.south) {\bjava{x < 2}};
   \node[Rect,below=1mm,xshift=11.5mm] (int@i3) at (int@i2.south) {\bjava{x = x + 1;}};
   \node[Rect,below=-1mm,double,draw=gray,text=gray] (int@i4) at (int@i3.south-|int@i2.south) {\textit{end}};   
   \draw[gray,Link] (int@i1) -- (int@i2);
   \draw[Link] (int@i2.east) -| (int@i3.north) node[pos=.75,right,font=\scriptsize] {T};
   \draw[gray,Link] ([xshift=6mm]int@i3.north) |- ([yshift=2mm]int@i2.east);
   \draw[Link] (int@i2.south) -- (int@i4.north) node[midway,left,font=\scriptsize] {F};
\end{tikzpicture}
\end{onlyenv}
\begin{onlyenv}<2->
\begin{tikzpicture}[Rect/.append style={font=\scriptsize,align=left,inner sep=3.5pt},remember picture]
   \node[Rect] (long@i1) at (0,0) {\bjava{int x = 0;}};
   \node[Rect,below=2mm,rounded corners=9pt] (long@i2) at (long@i1.south) {\bjava{x < 999999}};
   \node[Rect,below=1mm,xshift=11.5mm] (long@i3) at (long@i2.south) {\bjava{x = x + 1;}};
   \node[Rect,below=-1mm,double,draw=gray,text=gray] (long@i4) at (long@i3.south-|long@i2.south) {\textit{end}};   
   \draw[gray,Link] (long@i1) -- (long@i2);
   \draw[Link] (long@i2.east) -| (long@i3.north) node[pos=.75,right,font=\scriptsize] {T};
   \draw[gray,Link] ([xshift=6mm]long@i3.north) |- ([yshift=2mm]long@i2.east);
   \draw[Link] (long@i2.south) -- (long@i4.north) node[midway,left,font=\scriptsize] {F};
\end{tikzpicture}
\begin{tikzpicture}[overlay,remember picture]
   \onslide<3->{%
      \node[right=4.5cm] (long@i1) at (long@i1) {\AbstractInfo{x_0 \in \IntCC00 }};
   }%
   \onslide<4->{%
      \node[above right,yshift=-1.5pt] (long@i2a) at (long@i2-|long@i1.west) {\AbstractInfo{\only<7-8,11-15|handout:0>{\boldmath}\text{\textcolor{gray}{\scriptsize[pre]}~}x_1 \in \only<-7|handout:0>{\IntCC00}\only<8-10|handout:0>{\IntCC01\quad (\IntCC00 \cup \IntCC11)}\only<11->{\IntCC02\quad (\IntCC01 \cup \IntCC12)}}};
   }%
   \onslide<5->{%
      \node[below right,yshift=1.5pt] (long@i3a) at (long@i2-|long@i1.west) {\AbstractInfo{\only<9|handout:0>{\boldmath}\text{\textcolor{gray}{\scriptsize[in]}~}x_2 \in \only<-8|handout:0>{\IntCC00\quad (\IntCC00 \cap \IntOC{-\infty}1)}\only<9->{\IntCC01\quad (\IntCC01 \cap \IntOC{-\infty}1)}}};
   }%
   \onslide<6->{%
      \node[right] (long@i3) at (long@i3-|long@i1.west) {\AbstractInfo{\only<10|handout:0>{\boldmath}\text{}x_3 \in \only<-9|handout:0>{\IntCC11\quad (\IntCC00 \oplus \IntCC11)}\only<10->{\IntCC12\quad (\IntCC01 \oplus \IntCC11)}}};
   }
   \onslide<12->{%
      \node[right] at(long@i2a.east) {{\only<-14|handout:0>{\ldots}\only<15->{%
         \absexpr{\widen \implies x_1 \in \IntCO{0}{\infty}}
      }}};%
   };
   \onslide<16->{%
      \node[right] (long@i4) at (long@i4-|long@i1.west) {\AbstractInfo{\text{\textcolor{gray}{\scriptsize[post]}~}x_4 \in \IntCO{999999}{\infty} \quad (\IntCO{0}{\infty} \cap \IntCO{999999}{\infty})}};
   }
\end{tikzpicture}
\end{onlyenv}
\vspace*{1.85em}
\begin{itemize}
   \itemsep6.5pt
   \item<13-> Fixpoint iteration can be \textit{very} expensive, and may not stabilize % e.g. with recursion on an infinite lattice
   \item<14-> \textit{Widening}~(\absexpr{\widen}) is crucial, computing an upper bound
\end{itemize}
   % Comment on narrowing and widening
   % 393
\begin{tikzpicture}[overlay,remember picture]
   \node[above right,gray,yshift=3.5mm,font=\tiny,text width=.9\paperwidth] at (current page.south west) {\citetitle{cousout2021principles}~\cite[393]{cousout2021principles}, \citetitle{DBLP:journals/cl/CortesiZ11}~\cite{DBLP:journals/cl/CortesiZ11}};
\end{tikzpicture}
\end{frame}

\newsavebox\SignDomainPingu
\savebox\SignDomainPingu{%
\tikz{\pingu[eyes shiny,body type=legacy,heart,bow tie,wool hat,left wing wave]}%
}
\begin{frame}{Let's Bring it All Together\qquad\textcolor{gray}{Sign Analysis}}
\begin{tikzpicture}[overlay,remember picture]
   \onslide<2->{\node[below right=3mm,yshift=-1.35cm] (@ipingu) at (current page.north west) {\scalebox{.5}{\usebox\SignDomainPingu}};
   \node[below right,yshift=-1.5mm,align=left,font=\small,text width=.95\linewidth] at(@ipingu.north east) {I want to make a sign analysis!~\textcolor{lightgray}{~\footnotesize(amazing!)}\vspace{-\baselineskip}
   {\begin{enumerate}
      \itemsep8pt
      \item<3-> Define the lattice! \textcolor{gray}{\footnotesize(there are many solutions)}\hfill{
         \llap{\smash{%
\raisebox{-\height+2\baselineskip}{\onslide<7-|handout:2>{%
\begingroup
\scriptsize
\begin{tikzpicture}[line cap=round,x=7.5mm,y=3mm,darkgray]
   \node (top) at (.25,0) {\absexpr{\top}};
   \node (pos) at (1,1) {\absexpr{\geq 0}};
   \node (neg) at (1,-1) {\absexpr{\leq 0}};
   \node (zero) at (2,0) {\absexpr{0}};
   \node (bot) at (3,0) {\absexpr{\bot}};
   \draw (top.east) -- (pos.west) (pos.east) -- (zero.west) (zero.west) -- (neg.east) (neg.west) -- (top.east) (zero.east) -- (bot.west|-zero.east);
\end{tikzpicture}
\endgroup
}~~~~~~\strut}%
         }}
      }\\[-2pt]
      \textit{\footnotesize drawing the hasse diagram is enough for us here}\\
      \onslide<7-|handout:2>{%
         \textcolor{darkgray}{%
            \absexpr{
               \mathcal{L} = (
                  x = \{\bot, 0, \leq\!0, \geq\!0, \top\},~
                  \leq = \{(\bot, 0), (\bot, \leq\!0), \ldots\},
                  \sqcup = \{(\bot, x) \mapsto x, (0, \leq\!0) \mapsto \leq\!0, \ldots\},
            }\\
            ~~~~~~~~\absexpr{%
                  \sqcap = \{(\top, x) \mapsto x, (0, \leq\!0) \mapsto 0, \ldots\},
                  \bot, \top
               )
            }
         }
      }
      \item<4-> Define the abstract semantics on the following language!\\[2pt]
\begin{bnf}
\(\expr\) ::= \(c\) : \Comment{\text{constant}, \subnode{constant}{c \in \R}\vspace*{\baselineskip}}
   | \(\expr_1 + \expr_2\) : \Comment{\text{\subnode{add}{addition}}}
   ;;
\end{bnf}\begin{tikzpicture}[overlay,remember picture]
   \onslide<8-|handout:2>{%
      \node[right=20mm,yshift=.25mm+2mm,text width=8cm,font=\footnotesize,darkgray] (@1) at (constant.east) {%
          \absexpr{\EvaluateExpr{\texttt{c}}\Environment \asdef\eq \begin{cases}
             \geq\!0 & \text{if } \texttt{c} > 0 \\
             0 & \text{if } \texttt{c} = 0 \\
             \leq\!0 & \text{if } \texttt{c} < 0
          \end{cases}}
      };
      \node[below right,yshift=.25mm+3.5mm,text width=8cm,font=\footnotesize,darkgray] at (add.east-|@1.west) {%
         \absexpr{\subnode{eval-expr-writing}{\EvaluateExpr{\texttt{a + b}}\Environment} \asdef\eq 
         \EvaluateExpr{\texttt{a}}\Environment \oplus \EvaluateExpr{\texttt{b}}\Environment
         }\\[4pt]
         \begin{tabular}{r@{\hskip10pt}ccccc}
            \absexpr{\oplus} & \absexpr{\bot} & \absexpr{0} & \absexpr{\leq} & \absexpr{\geq} & \absexpr{\top} \\[1pt]
            \absexpr{\bot} & \absexpr{\bot} & \absexpr{\bot} & \absexpr{\bot} & \absexpr{\bot} & \absexpr{\bot} \\
            \absexpr{0} &  & \absexpr{0} & \absexpr{\leq} & \absexpr{\geq} & \absexpr{\top} \\
            \absexpr{\leq} &  &  & \absexpr{\leq} & {\color{red}\normalsize\absexpr{\top}} & \absexpr{\top} \\
            \absexpr{\geq} &  &  &  & \absexpr{\geq} & \absexpr{\top} \\
            \absexpr{\top} &  &  &  &  & \absexpr{\top}
         \end{tabular}\\[-4.5pt]
         ~~~~~~~~~~~~\absexpr{x \oplus y = y \oplus x}
      };%
   }
   \onslide<9-|handout:2>{
      \draw[Kite-,gray,line cap=round] (eval-expr-writing.north) to[out=140,in=0] ++(-.5,.15) node[left,font=\scriptsize] {short for \absexpr{\text{evalExpr}(\expr, \Environment=env)}};
   }
\end{tikzpicture}
      \item<5-> Provide a concretization for~\absexpr{\gamma(\text{0})} and 
      \absexpr{\gamma(\leq\!0)}!\\[2pt]
      \onslide<10-|handout:2>{%
         \textcolor{darkgray}{%
            \absexpr{\gamma(0) = \{0\}},\quad
            \absexpr{\gamma(\leq\!0) = \{n \in \mathbb{Z} \mid n \leq 0\}}%
         }%
      }
      \item<6-> Do we need widening? If so, define \absexpr{\widen}!\\[2pt]
         \onslide<11-|handout:2>{\textcolor{darkgray}{\textit{We do not need widening here as our lattice is finite\\and our semantics do not introduce new elements. (We will concretize this next week.)}}}
   \end{enumerate}}
   };
   }
\end{tikzpicture}  
\end{frame}

\def\CurrentSectionComment{This is incredible, I need more!}
\section{Outlook and Comments}
\begin{frame}{The Domains We Built\ldots}
   \begin{itemize}
      \itemsep12pt
      \item<2-> We know a handful of important concepts for our domains: \begin{itemize}
         \item<3-> Lattices \textcolor{gray}{(poset, with join~\absexpr{\lub}, meet~\absexpr{\glb}, bottom~\absexpr{\bot}, and top~\absexpr{\top})}
         \item<5-> Program Semantics \textcolor{gray}{(\absexpr{\EvaluateStatement{stm}\SetOfStates}, \ldots, e.g., \absexpr{\EvaluateExpr{a + b}\Environment = \EvaluateExpr{a}\Environment \oplus \EvaluateExpr{b}\Environment})}
         \item<6-> Fixpoint Iterations \textcolor{gray}{(to interpret loops, recursion, \ldots)}
         \item<7-> Widening \textcolor{gray}{(to ensure termination with infinite chains)}
         \item<8-> Galois Connections \textcolor{gray}{(to relate concrete and abstract domains)}
      \end{itemize}
      \item<9-> With abstract interpretation we interpret programs \textit{over} these domains!
      \item<10-> However, we have only looked at single variables and single domains so far!
   \end{itemize}
\end{frame}

\newsavebox\SamuelEilenberg
\savebox\SamuelEilenberg{%
\ImageWithRoundedCorners{17.5mm}{samuel-eilenberg.jpg}%
}
\newsavebox\SaundersMacLane
\savebox\SaundersMacLane{%
\ImageWithRoundedCorners{17.5mm}{saunders-maclane.jpg}
}
\newsavebox\TableShapeExample
\savebox\TableShapeExample{%
\begin{tikzpicture}[line cap=round,line join=round,font=\footnotesize]
   \matrix[
      matrix of nodes,
      row sep=-0.8pt,
      column sep=-0.8pt,
      nodes={rectangle,gray!60,draw=gray!60,line width=0.8pt,align=center},
      text height=1ex,
      text depth=0.25ex,
      nodes in empty cells,
      column 1/.append style={
         nodes={text width=1em}
      },
      column 2/.append style={
         nodes={text width=2em}
      },
      column 3/.append style={
         nodes={text width=2.5em}
      },
      row 1/.append style={
         nodes={gray,draw=gray!60}
      },
      ampersand replacement=\&
   ] (table) {
      \texttt{id} \& \texttt{name} \& \texttt{score} \\
      \(\cdots\) \& \(\cdots\)  \& \(\cdots\)   \\
      \(\cdots\) \& \(\cdots\)  \& \(\cdots\)   \\
   };
      \draw[decorate,thick,decoration={brace,mirror,amplitude=5pt,raise=2pt},gray!50] (table-1-1.north west) -- (table-2-1.north west) node[midway,left=7pt,inner sep=0pt] (colnames) {};
      \draw[Kite-,gray!50] (colnames) to[bend left] ++(-0.25,0.4) node[above right=0pt,xshift=-16pt,gray,font=\scriptsize] {column names};
      \draw[decorate,thick,decoration={brace,mirror,amplitude=5pt,raise=2pt},gray!50] (table-3-1.south west) -- (table-3-3.south east) node[midway,below=7pt,gray,font=\scriptsize] {\#columns};
      \draw[decorate,thick,decoration={brace,mirror,amplitude=5pt,raise=2pt},gray!50] (table-1-1.south west) -- (table-3-1.south west) node[midway,left=7pt,gray,font=\scriptsize] {\#rows};
\end{tikzpicture}
}
\newsavebox\OliverGerstl
\savebox\OliverGerstl{%
\ImageWithRoundedCorners{13mm}{oliver-gerstl.jpg}
}
\begin{frame}{Combining Domains: Products}
   \begin{itemize}
      \itemsep5pt
      \item<2-> \small Let's assume we have two domains \absexpr{D_1} and \absexpr{D_2}
      \item<3-> \small We can combine them into a \textit{product domain}: \absexpr{D_1 \times D_2}\bigskip
      \item<5-> For example, let's suppose we want to track the shape of tables!\hfill\llap{\onslide<6->{\smash{\raisebox{-\height}{\usebox\TableShapeExample}}}\kern-2.5em}\\
      \onslide<7->{We define three domains!} \begin{itemize}
         \item<8-> \absexpr{\mathcal{N} \asdef\eq \P(\Sigma^*)} \textcolor{gray}{\footnotesize(set of column names)}
         \item<9-> \absexpr{\mathcal{R} \eq \mathcal{C} \asdef\eq \Set{\IntCC{a}{b} \mid a, b \in \N_0 \cup \{\infty\}, a \leq b}} \textcolor{gray}{\footnotesize(\# of rows/columns)}\medskip
         \item<10-> Then we can define the domain: \absexpr{\mathcal{DF} \asdef\eq \mathcal{N} \times \mathcal{R} \times \mathcal{C}}
      \end{itemize}
   \end{itemize}

   \begin{tikzpicture}[overlay,remember picture]
         \onslide<4->{
      \node[below left=4.65mm,yshift=3mm,align=right,font=\tiny,
         href node={https://opc.mfo.de/detail?photo_id=27407}
      ] (@bk) at(current page.north east) {%
         \usebox\SamuelEilenberg\\[1.65pt]
         \textsb{Samuel Eilenberg (1913--1998)}\\%
         \color{gray}\ccbysa~2.0~Oberwolfach\\\color{gray}Photo Collection
      };
      \node[above left,xshift=-.75mm,font=\tiny,align=right,
         href node={https://opc.mfo.de/detail?photoID=2684}
      ] (@dr) at(@bk.south west) {%
         \usebox\SaundersMacLane\\[1.65pt]
         \textsb{Saunders Mac Lane (1909--2005)}\\%
         \color{gray}\ccbysa~2.0~Oberwolfach\\\color{gray}Photo Collection
      };
   }
   \onslide<11->{
      \node[above right,gray,yshift=4mm,font=\footnotesize] at (current page.south west) {Category theory is amazing!}; 
   }
   \onslide<12->{
      \node[above left=1.5mm,yshift=2.75mm,
         href node={http://www.uni-ulm.de/in/sp/team/oliver-gerstl/},
         align=right,
      ] at (current page.south east) {
         \llap{\smash{\raisebox{.75\height}{\parbox{.3675\linewidth}{\raggedleft\tiny\color{gray}\cite{ogthesis}~\fullcite{ogthesis}\endgraf}}}~~}\usebox\OliverGerstl
      };
   }
   \end{tikzpicture}

\end{frame}

\newsavebox\OutlookPingu
\savebox\OutlookPingu{%
\tikz{\pingu[eyes shiny,body type=legacy,heart,bow tie,wool hat,right wing wave]}%
}
\begin{frame}{Outlook}
   \begin{itemize}[<+(1)->]
      \itemsep8pt
      \item Domain transformers\\
         \color{gray}combine abstract domains\,\textsuperscript{\cite[149]{DBLP:journals/ftpl/Mine17}}
      \item Galois connections (offer so much more)\\
         \color{gray}define the relationship between concrete and abstract domains\,\textsuperscript{\cite[110]{cousout2021principles}}
      \item Corresponding to widening, narrowing\\
      \color{gray}refines approximations\,\textsuperscript{\cite[395]{cousout2021principles}}
      \item Function calls\\
      \color{gray}require special handling\,\textsuperscript{\cite{DBLP:journals/iandc/MidtgaardJ12}}
      \item Existing libraries allow for easy implementation\\
      \color{gray}LiSA\,\textsuperscript{\cite{DBLP:conf/pldi/FerraraNAC21}}, MOPSA\,\textsuperscript{\cite{DBLP:conf/vstte/JournaultMMO19}}, Apron\,\textsuperscript{\cite{DBLP:conf/cav/JeannetM09}}
      \item There are other ways to define semantics\\
      \color{gray}e.g., small-step, big-step\,\textsuperscript{\cite{DBLP:conf/ifm/Ciobaca13}}
   \end{itemize}
   \onslide<8->{
      \begin{tikzpicture}[overlay,remember picture]
         \node[above left=1mm,yshift=4mm] (@) at (current page.south east) {\scalebox{.5}{\usebox\OutlookPingu}};
         \node[below left,gray,font=\scriptsize,align=right,text width=5cm] at (@.north west) {%
            Domains can also capture relations between variables (e.g. \textit{polyhedra}),
            their provenance, and much more!\\[4pt]
            However, this implies trade-offs which we discuss next time.
         };
      \end{tikzpicture}
   }
\end{frame}


\begin{frame}{Back to the Questions}
\begin{enumerate}
      \itemsep=12pt
      \item<2-> How would you capture what a \textit{property} is?~~~\onslide<3->{\faCheck}
      \item<2-> How would you phrase that one property is \enquote{better} than another?~~~\onslide<4->{\faCheck}
      \item<2-> For what operations would you \textit{not} use a control-flow graph?
      \item<2-> Why can't there be a fully automatic, sound, and complete static analyzer for general programs?
      \item<2-> What (big) additional challenges do you see in the real-world?
\end{enumerate}
\end{frame}

\newsavebox\FlorianSihler
\savebox\FlorianSihler{%
\ImageWithRoundedCorners{13mm}{florian-sihler.jpg}
}
\begin{frame}{And\ldots\space Back to the Real World?}
   \begin{tikzpicture}[overlay,remember picture]
      \onslide<2->{%
      \node[above right=5mm,yshift=1.5mm,align=left,darkgray,font=\footnotesize] at(current page.south west) {In case you like/are intrigued by what you see, join the horde: \fontseries{sb}\selectfont\href{mailto:florian.sihler@uni-ulm.de}{florian.sihler@uni-ulm.de}};}
      \onslide<3->{
         \node[below left=2mm] at(current page.north east) {\includegraphics[height=2.25cm]{../lecture_static_analyzers/logos/flowR.png}};
      }
      \onslide<4->{%
         \node[below left=1cm,yshift=-6.5mm,xshift=-2.125cm] at(current page.north east) {\resizebox{.75\paperwidth}!{\usebox\FlowRview}};
      }
      \onslide<5->{
         \node[above left=1.5mm,yshift=2.75mm,xshift=2.75mm,
            href node={https://www.uni-ulm.de/in/sp/team/florian-sihler/},
            align=right, scale=1.33
         ] (flo) at (current page.south east) {
            \usebox\FlorianSihler
         };
         
         \node[left=-4.15mm,yshift=-1.5mm,
            href node={https://www.uni-ulm.de/in/sp/team/oliver-gerstl/},
            align=right, scale=1.33
         ] (oli) at (flo.west) {
            \usebox\OliverGerstl
         };
   }
   \end{tikzpicture}
\end{frame}

\appendix
\renewcommand*{\bibfont}{\tiny}

\AtBeginSection{}
\begin{frame}[allowframebreaks]{References}
   \printbibliography[title={}] % TODO
\end{frame}

\section{History} 
\def\Mixin{}%
\tikzset{%
   history-line/.style={line width=1.85mm,gray!30!white\Mixin,line cap=round,rounded corners=2pt},
   history-line skip/.style={history-line, line width=.75mm,loosely dotted},
   history-event/.style={history-line,gray\Mixin,line width=1mm,{Circle[length=1.85mm]}-,shorten <= -1.85mm/2},
   history@box/.style={yshift=.675\baselineskip,black\Mixin,text width=5.75cm,font=\small},
   history-range/.style={history-line, gray!60!white\Mixin,line cap=round,-{Triangle Cap}}   
}

% #1 left/right
% #2 when
% #3 what
% #4 optional comment
\def\historybox#1#2#3#4{node[history@box,below #1] (@) {\textbf{#2}: #3\ifx!#4!\else\\\footnotesize\itshape#4\par\fi}}
\begin{frame}[c]{\insertsubsection}
\centering\vspace*{-12.5mm}\begin{tikzpicture}
   \only<-4|handout:1>{\draw[history-line] (-.33,-.33) -- ++(.33,.33) -- ++(2,0) coordinate (@2)++(1,0) -- ++(9,0) node[above left,gray] {Static Analysis };}
   \onslide<5|handout:0>{
      \draw[history-line] (-.33,-.33) -- ++(.33,.33) -- ++(2,0) coordinate (@2)++(1,0) -- ++(0.5,0) coordinate (@l) -- ++(1,3) -- ++(7.5,0) node[above left,lightgray,yshift=-3pt] {\vphantom{y}Deductive Methods};
      \draw[history-line] (@l) -- ++(1,1) -- ++(7.5,0)  node[above left,lightgray,yshift=-3pt] {Model Checking};
      \draw[history-line] (@l) -- ++(1,-1) -- ++(7.5,0) node[above left,lightgray,yshift=-3pt] {Symbolic Execution};  % 
      \draw[history-line] (@l) -- ++(1,-3) -- ++(7.5,0) node[above left,lightgray,yshift=-3pt] {Abstract Interpretation};
   }
   \only<6-|handout:2->{
      \draw[history-line] (-.33,-.33) -- ++(.33,.33) -- ++(.5,0) coordinate (@2)++(1,0) -- ++(0.5,0) coordinate (@l) -- ++(1,3) -- ++(9,0) node[above left,lightgray,yshift=-3pt] {\vphantom{y}Deductive Methods};
      \draw[history-line] (@l) -- ++(1,1) -- ++(9,0) node[above left,lightgray,yshift=-3pt] {Model Checking};
      \draw[history-line] (@l) -- ++(1,-1) -- ++(9,0) node[above left,lightgray,yshift=-3pt] {Symbolic Execution};
      \draw[history-line] (@l) -- ++(1,-3) -- ++(9,0) node[above left,lightgray,yshift=-3pt] {Abstract Interpretation};
   }
   \draw[history-line skip] (@2)++(.15,0) -- ++(.85,0);
   \begin{onlyenv}<-5|handout:1>
\pause
   \draw[history-event] (.5,0) -- ++(.25,2) -- ++(.25,0) \historybox{right}{1949}{First Checks}{\citeauthor*{turing1989checking}~\cite{turing1989checking}};
\pause
   \draw[history-event] (1,0) -- ++(.25,1.15) -- ++(.25,0) \historybox{right}{1953}{Rice Theorem}{Non-trivial properties\\are undecidable~\cite{rice1953classes}};
\pause
   \draw[history-event] (1.5,0) -- ++(.25,-.45) -- ++(.25,0) \historybox{right}{1967\,\&\,69}{Logical Foundation}{\citeauthor*{floyd1967assigning}~\cite{floyd1967assigning}, \citeauthor*{DBLP:journals/cacm/Hoare69}~\cite{DBLP:journals/cacm/Hoare69}\\But: No Automation};
   \end{onlyenv}
\only<6-|handout:2->{%
   \node[above right,lightgray] at(0,0) {\footnotesize\cite{turing1989checking,rice1953classes}};
   \node[below right,lightgray] at(0,-1pt) {\footnotesize\cite{floyd1967assigning,DBLP:journals/cacm/Hoare69}};
}
% DBLP:conf/cade/OwreRS92
\begin{onlyenv}<7-|handout:2->
   \tikzset{@/.style={}}\only<9-|handout:0>{\tikzset{@/.style={lightgray}}}
   \draw[history-event,@] (4,3) -- ++(.25,1.45) -- ++(.25,0) \historybox{right,@}{1992}{Theorem Prover}{PVS, \citeauthor*{DBLP:conf/cade/OwreRS92}~\cite{DBLP:conf/cade/OwreRS92}};
   \onslide<8->{%
   \draw[history-event,@] (4.4,3) -- ++(.25,.75) -- ++(.25,0) \historybox{right,@}{2004}{Proof Asisstant}{Coq, \citeauthor*{DBLP:series/txtcs/BertotC04}~\cite{DBLP:series/txtcs/BertotC04}}; % isabelle, agda, ...
   }
   \tikzset{@/.style={}}\only<11-|handout:0>{\tikzset{@/.style={lightgray}}}
   % DBLP:journals/toplas/ClarkeES86
   \onslide<9->{%
   \draw[history-event,@] (3.5,1) -- ++(.25,1.45) -- ++(.25,0) \historybox{right,@}{1986}{Foundations}{\citeauthor*{DBLP:journals/toplas/ClarkeES86}~\cite{DBLP:journals/toplas/ClarkeES86}};
   }
   \onslide<10->{%
   \draw[history-event,@] (4.4,1) -- ++(.25,.75) -- ++(.25,0) \historybox{right,@}{2004}{Bounded MC}{\citeauthor*{clarke2004tool}~\cite{clarke2004tool}};
   }
   \tikzset{@/.style={}}\only<13-|handout:0>{\tikzset{@/.style={lightgray}}}
   \onslide<11->{%
   \draw[history-event,@] (3.15,-1) -- ++(.25,1.45) -- ++(.25,0) \historybox{right,@}{1974\,\&\,75}{Foundations}{\citeauthor*{DBLP:conf/relsoft/BoyerEL75}~\cite{DBLP:conf/relsoft/BoyerEL75}, \citeauthor*{DBLP:conf/ibm/King74}~\cite{DBLP:conf/ibm/King74}};
   }
   \onslide<12->{%
   \draw[history-event,@] (4.5,-1) -- ++(.25,.75) -- ++(.25,0) \historybox{right,@}{2008}{Automation}{KLEE, \citeauthor*{DBLP:conf/osdi/CadarDE08}~\cite{DBLP:conf/osdi/CadarDE08}};
   }
   \onslide<13->{%
      \draw[history-event] (3.2,-3) -- ++(.25,1.45) -- ++(.25,0) \historybox{right}{1977}{Fixpoints on Lattices}{\citeauthor{DBLP:conf/popl/CousotC77}~\cite{DBLP:conf/popl/CousotC77}};
   }
   
   \onslide<14->{%
      \draw[history-event] (4.4,-3) -- ++(.25,.75) -- ++(.25,0) \historybox{right}{2004}{Automated Application}{\citeauthor{DBLP:conf/ifip/Mauborgne04}~\cite{DBLP:conf/ifip/Mauborgne04}};
   }
\end{onlyenv}
   \onslide<1->
\end{tikzpicture}
\begin{tikzpicture}[overlay,remember picture]
   \node[above right,gray,yshift=3.5mm,font=\tiny,text width=.9\paperwidth] at (current page.south west) {Based on the amazing \citetitle{DBLP:journals/ftpl/Mine17} by \citeauthor{DBLP:journals/ftpl/Mine17}~\cite{DBLP:journals/ftpl/Mine17}, \href{https://web.archive.org/web/20241208213653/https://www.di.ens.fr/~cousot/AI/}{https://www.di.ens.fr/\textasciitilde cousot/AI/}, and \cite{DBLP:journals/csur/BaldoniCDDF18,DBLP:journals/annals/GiacobazziR22}};
\end{tikzpicture}
\note[itemize]{
   \item Turing: Had formal model, wants to know what it can do => Halting Problem
   \item Rice: Generalized, known from last lecture
   \item Floyd and Hoare: Used Logic to proof what the program does (Hoare Calculus,~\ldots), but not real adoption because missing automation~--- rules still hold!!
   \item Incomplete Overview, areas are not mutually exclusive, Area like Data-Flow Analysis is a technique but also a problem field of question that other techniques can retrieve
   \item **Deductive Methods:** Axioms and Inference Rules; e.g. Theorem Provers and Assistants, usually need human interaction (or today, large training data), e.g. with Agda, or Rocq, lot of fun
   \item **Model Checking:** Build model from execution and explore all states; Foundations by Clarke, moer later in the lecture. Big Problem: state explosion, and infinite states, bounded model checking tries to fix that by bounding the exploration depth
   \item **Symbolic Execution:** Execute program with symbolic values instead of concrete ones, e.g constraint x = y * 2 + sin(c), summarizes sets of inputs to get properties (e.g. test generation), tries to go to automation
   \item **Abstract Intrepretation:** started with lot of theory and Patrick: front to back, Radhia: back to front, took some time to get adtoped. Less automation but more existing tools at the time, hindley-milner type sytem existed, lot of functional ideas etc. idea was: if the program type checks it is correct~--- today we know this dream could not be reached. Boomed with the 2000s with more automation and Astree in airplanes etc.
}
\end{frame}

\end{document}